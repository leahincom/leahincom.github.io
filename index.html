
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="leah">
    <title>leah</title>
    <meta name="author" content="JungHyun">
    
        <meta name="keywords" content="hexo,javascript,">
    
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"Website","@id":"https://leahincom.github.io","author":{"@type":"Person","name":"JungHyun","sameAs":["https://github.com/leahincom","https://facebook.com/junghyun.lah/","https://www.linkedin.com/profile","mailto:leahincom@gmail.com"],"image":"profile.jpeg"},"name":"leah","description":"Continuously Developing Developer","url":"https://leahincom.github.io","keywords":"hexo, javascript"}</script>
    <meta name="description" content="Continuously Developing Developer">
<meta property="og:type" content="blog">
<meta property="og:title" content="leah">
<meta property="og:url" content="https://leahincom.github.io/index.html">
<meta property="og:site_name" content="leah">
<meta property="og:description" content="Continuously Developing Developer">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="JungHyun">
<meta property="article:tag" content="hexo">
<meta property="article:tag" content="javascript">
<meta name="twitter:card" content="summary">
    
    
        
    
    
        <meta property="og:image" content="https://leahincom.github.io/assets/images/profile.jpeg"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/all.css">

    
<link rel="stylesheet" href="/assets/css/jquery.fancybox.css">

    
<link rel="stylesheet" href="/assets/css/thumbs.css">

    
<link rel="stylesheet" href="/assets/css/tranquilpeak.css">

    <!--STYLES END-->
    

    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="2">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            leah
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/profile.jpeg" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="2">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="Read more about the author"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/profile.jpeg" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">JungHyun</h4>
                
                    <h5 class="sidebar-profile-bio"><p>author.bio</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="Categories"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="Tags"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="Archives"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="Search"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Search</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="About"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/leahincom"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://facebook.com/junghyun.lah/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Facebook"
                        >
                        <i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.linkedin.com/profile"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="mailto:leahincom@gmail.com"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Mail"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/atom.xml"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="2"
                 class="
                        hasCoverMetaIn
                        ">
                <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/05/31/strict-mode/"
                            aria-label=": strict mode"
                        >
                            strict mode
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-05-31T03:23:11+09:00">
	
		    May 31, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Language/">Language</a>, <a class="category-link" href="/categories/Language/JavaScript/">JavaScript</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h2><p>JavaScript의 제한된 버전을 선택하여 기본값인 sloppy mode를 해제하는 방법으로, 일반적인 코드와 다른 semantics를 지니고 있다. 하지만 sloppy mode와 strict mode의 코드는 공존할 수 있어, 차후 strict mode를 이용하여 스크립트의 모드를 변경할 수도 있다.</p>
<br />



<p><em><strong>그래서 strict mode란 무엇일까?</strong></em></p>
<ol>
<li>기존에 문제를 발생시키지 않고 조용히 무시되던 에러들을 throwing한다.</li>
<li>JavaScript 엔진의 최적화 작업을 어렵게 만드는 실수들을 바로잡는다. 이는 동일한 내용이지만 sloppy mode 코드일 때보다 더 빨리 작동하도록 돕는다.</li>
<li>이후의 ECMAScript 업데이트로 인한 자동적인 변경을 제한한다.</li>
<li>모듈은 기본적으로 strict mode이다.</li>
</ol>
<br />



<p>이를 적용하는 조건은 다음과 같다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 스크립트 전체</span></span><br><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">// 일부</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">strict</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">  &quot;use strict&quot;</span>;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>전체 스크립트 또는 부분 함수에 적용 가능하다.</p>
<ul>
<li><p>{} 로 묶여진 블럭문에는 적용되지 않는다. 따라서, context와 같은 곳에 적용을 시도하면 동작하지 않는다.</p>
</li>
<li><p>eval, Function 코드, 이벤트 핸들러 속성, setTimeout() 등의 함수에 전달된 문자열은 전체 스크립트로, 적용 가능하다.</p>
</li>
</ul>
<br />



<h4 id="변경-사항"><a href="#변경-사항" class="headerlink" title="변경 사항"></a>변경 사항</h4><p>이러한 strict mode는 구문과 런타임 동작 등을 모두 변경시킨다. 예를 들어,</p>
<ol>
<li>변환 실수를 오류로 해석하거나 (문법 오류/ 런타임 에러 발생),</li>
<li>특정 이름의 특정 용도에 대한 특정 변수를 계산하는 방법을 단순화하며,</li>
<li><code>eval</code> 과 <code>arguments</code> 를 단순화하고,</li>
<li>“안전한 “자바 스크립트를 작성하도록 돕고, </li>
<li>미래 ECMAScript의 진화에 대비합니다.</li>
</ol>
<br />



<p>위와 같은 변경으로 인해, 기존에는 인정되던 실수를 에러로 인식하여 발생시킨다. </p>
<ol>
<li><p>글로벌 변수를 생성하는 것을 금한다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;use strict&quot;;</span><br><span class="line">&#x2F;&#x2F; 전역 변수 mistypedVariable 이 존재한다고 가정</span><br><span class="line">mistypedVaraible &#x3D; 17; &#x2F;&#x2F; ReferenceError 를 발생시킴</span><br></pre></td></tr></table></figure></li>
<li><p>일반 코드에서 조용히 넘어가는 모든 실패 (쓸 수 없는 전역 또는 프로퍼티에 할당, getter-only 프로퍼티에 할당, <a target="_blank" rel="noopener" href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object/preventExtensions">확장 불가</a> 객체에 새 프로퍼티 할당) 에 대해 예외를 발생시킨다.</p>
<ul>
<li><code>NaN</code> 은 쓸 수 없는 전역 변수 ( <code>NaN</code> 에 할당하는 일반적인 코드는 아무 것도 하지 않는다. ) 로, 예외를 발생시킨다.</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 쓸 수 없는 프로퍼티에 할당</span></span><br><span class="line"><span class="keyword">var</span> <span class="literal">undefined</span> = <span class="number">5</span>; <span class="comment">// TypeError 발생</span></span><br><span class="line"><span class="keyword">var</span> <span class="literal">Infinity</span> = <span class="number">5</span>; <span class="comment">// TypeError 발생</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 쓸 수 없는 프로퍼티에 할당</span></span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj1, <span class="string">&quot;x&quot;</span>, &#123; <span class="attr">value</span>: <span class="number">42</span>, <span class="attr">writable</span>: <span class="literal">false</span> &#125;);</span><br><span class="line">obj1.x = <span class="number">9</span>; <span class="comment">// TypeError 발생</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// getter-only 프로퍼티에 할당</span></span><br><span class="line"><span class="keyword">var</span> obj2 = &#123; <span class="keyword">get</span> <span class="title">x</span>() &#123; <span class="keyword">return</span> <span class="number">17</span>; &#125; &#125;;</span><br><span class="line">obj2.x = <span class="number">5</span>; <span class="comment">// TypeError 발생</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 확장 불가 객체에 새 프로퍼티 할당</span></span><br><span class="line"><span class="keyword">var</span> fixed = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.preventExtensions(fixed);</span><br><span class="line">fixed.newProp = <span class="string">&quot;ohai&quot;</span>; <span class="comment">// TypeError 발생</span></span><br></pre></td></tr></table></figure></li>
<li><p>삭제할 수 없는 프로퍼티를 삭제하려 할 때; 시도가 어떤 효과도 없을 때, 예외를 발생시킨다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"><span class="keyword">delete</span> <span class="built_in">Object</span>.prototype; <span class="comment">// TypeError 발생</span></span><br></pre></td></tr></table></figure></li>
<li><p>일반 코드에서는 마지막으로 중복된 인수가 이전에 지정된 인수를 숨기지만, 유니크한 함수 파라미터 이름을 요구한다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a, a, c</span>)</span>&#123; <span class="comment">// !!! 구문 에러</span></span><br><span class="line"><span class="meta">  &quot;use strict&quot;</span>;</span><br><span class="line">  <span class="keyword">return</span> a + b + c; <span class="comment">// 코드가 실행되면 잘못된 것임</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<br />



</li>
</ol>
<h4 id="장점"><a href="#장점" class="headerlink" title="장점"></a>장점</h4><h5 id="변수-사용-단순화"><a href="#변수-사용-단순화" class="headerlink" title="변수 사용 단순화"></a>변수 사용 단순화</h5><ul>
<li>코드상의 변수 이름을 특정 변수 정의로 매핑하는 방법을 단순화한다.</li>
<li>자바스크립트는 때때로 이름을 코드상의 변수 정의로 기본 매핑하는 것을 런타임때까지 실행이 불가하게 하는데, 이것이 발생하는 대부분의 경우를 제거하여 컴파일러가 strict mode 코드를 더 잘 최적화 할 수 있게 한다.</li>
</ul>
<ol>
<li><p><code>with</code> 를 사용하지 못하게 한다.</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://whereswalden.com/2011/01/10/new-es5-strict-mode-support-new-vars-created-by-strict-mode-eval-code-are-local-to-that-code-only/">엄격모드 코드의 <code>eval</code> 은 새로운 변수를 주위 스코프에 추가하지 않는다</a>.</p>
</li>
<li><p>셋째로, 엄격모드는 일반 이름을 제거하는 것을 금지합니다. 엄격 모드에서 <code>delete name</code> 은 구문 에러입니다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> x;</span><br><span class="line"><span class="keyword">delete</span> x; <span class="comment">// !!! 구문 에러</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">eval</span>(<span class="string">&quot;var y; delete y;&quot;</span>); <span class="comment">// !!! syntax error</span></span><br></pre></td></tr></table></figure>
<br />



</li>
</ol>
<h5 id="eval-과-arguments-를-더-간단하게-하기"><a href="#eval-과-arguments-를-더-간단하게-하기" class="headerlink" title="eval 과 arguments 를 더 간단하게 하기"></a>eval 과 arguments 를 더 간단하게 하기</h5><blockquote>
<ul>
<li><p>바인딩을 추가하거나 삭제하고 바인딩 값을 변경하기 위한 <code>eval</code></p>
</li>
<li><p>명명된 인수를 가리키는, indexed 프로퍼티 <code>arguments</code></p>
</li>
</ul>
</blockquote>
<br />



<h5 id="JavaScript-“보안”"><a href="#JavaScript-“보안”" class="headerlink" title="JavaScript “보안”"></a>JavaScript “보안”</h5><p>브라우저에서 자바스크립트는 사용자의 개인정보에 접근할 수 있기 때문에, 자바스크립트는 금지된 기능에 접근을 막기 위해 실행 전, 반드시 부분적으로 변경되어야 한다. 하지만 자바스크립트의 유연성으로 인해 런타임 체크없이 이것을 수행하는 것은 사실상 불가능하다. strict mode를 이용하면 특정 방식으로 호출되므로 런타임 검사의 필요성이 크게 줄어든다.</p>
<ol>
<li><code>this</code> 로 함수에 전달된 값은 강제로 객체가 되지 않는다 (a.k.a. “boxed”). 즉, 브라우저에서 엄격모드의 함수내 에서는 더 이상 <code>window</code> 객체를 <code>this</code> 를 통해 참조할 수 없다.<ul>
<li>정의된 <code>this</code> 는 boxed 객체가 되지 않으며,</li>
<li>정의되지 않은 경우 <code>this</code> 는 <code>undefined</code> 가 된다. </li>
</ul>
</li>
</ol>
<br />



<h5 id="미래의-ECMAScript-버전을-위한-준비"><a href="#미래의-ECMAScript-버전을-위한-준비" class="headerlink" title="미래의 ECMAScript 버전을 위한 준비"></a>미래의 ECMAScript 버전을 위한 준비</h5><ul>
<li>새롭게 선보일 ECMAScript 버전은 새로운 구문을 소개할 것이고, ECMAScript5에서의 엄격 모드는 변환을 쉽게 하기 위해 몇 가지의 제한을 적용한다.</li>
</ul>
<br />



<h2 id="React"><a href="#React" class="headerlink" title="React"></a>React</h2><p>아래와 같은 코드를 <code>index.js</code> 에서 많이 보았을 것이다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;React.StrictMode&gt;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;/React.StrictMode&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&quot;root&quot;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<br />



<p>React에서 strict mode는 <code>&lt;React.StrictMode&gt;&lt;/React.StrictMode&gt;</code> 을 이용해 적용한다.</p>
<ul>
<li>StrictMode는 잠재적인 에러를 잡는 툴이다.</li>
<li>Fragment와 같이, StrictMode는 가시적인 UI를 렌더링하지 않지만, 안에 정의되는 후손 (자식 노드) 들에 추가적인 검사를 시행하고 경고를 띄운다.</li>
<li>strict mode 체크는 development mode에서만 시행되고, production 빌딩에 영향을 주지 않는다.</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ExampleApplication</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Header /&gt;</span><br><span class="line">      &lt;React.StrictMode&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;ComponentOne /&gt;</span><br><span class="line">          &lt;ComponentTwo /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/React.StrictMode&gt;</span><br><span class="line">      &lt;Footer /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>StrictMode는 <code>Header</code> 나 <code>Footer</code> 컴포넌트에 영향을 주지 않는다.</li>
<li>하지만, <code>ComponentOne</code> 과 <code>ComponentTwo</code> 및 그 후손들은 영향을 받는다.</li>
</ol>
<br />



<p><em><strong>React에서 strict mode는 어떻게 작동할까?</strong></em></p>
<ol>
<li>안전하지 않은 생명주기를 사용하는 컴포넌트 발견</li>
<li>레거시 문자열 ref 사용에 대한 경고</li>
<li>권장되지 않는 findDOMNode 사용에 대한 경고</li>
<li>예상치 못한 부작용 검사</li>
<li>레거시 context API 검사</li>
</ol>
<br />



<p>이를 좀 더 자세히 알아보자.</p>
<br />



<h4 id="특징"><a href="#특징" class="headerlink" title="특징"></a>특징</h4><h5 id="안전하지-않은-생명주기를-사용하는-컴포넌트-발견"><a href="#안전하지-않은-생명주기를-사용하는-컴포넌트-발견" class="headerlink" title="안전하지 않은 생명주기를 사용하는 컴포넌트 발견"></a>안전하지 않은 생명주기를 사용하는 컴포넌트 발견</h5><p>Strict 모드가 활성화되면, React는 안전하지 않은 생명주기 메서드를 사용하는 모든 클래스 컴포넌트 목록을 정리해 다음과 같이 컴포넌트에 대한 정보가 담긴 경고 로그를 출력한다.</p>
<p><img src="https://ko.reactjs.org/static/e4fdbff774b356881123e69ad88eda88/1628f/strict-mode-unsafe-lifecycles-warning.png" alt="1"></p>
<br />



<h5 id="레거시-문자열-ref-사용에-대한-경고"><a href="#레거시-문자열-ref-사용에-대한-경고" class="headerlink" title="레거시 문자열 ref 사용에 대한 경고"></a>레거시 문자열 ref 사용에 대한 경고</h5><p>이전의 React에서 레거시 문자열 ref API와 콜백 API라는, ref를 관리하는 두 가지 방법을 제공하였었다. 이제는 객체 ref가 문자열 ref를 교체하는 용도로 널리 더해졌기 때문에, Strict 모드는 문자열 ref의 사용에 대해 경고한다.</p>
<br />



<h5 id="권장되지-않는-findDOMNode-사용에-대한-경고"><a href="#권장되지-않는-findDOMNode-사용에-대한-경고" class="headerlink" title="권장되지 않는 findDOMNode 사용에 대한 경고"></a>권장되지 않는 findDOMNode 사용에 대한 경고</h5><p>이전의 React에서 주어진 클래스 인스턴스를 바탕으로 트리를 탐색해 DOM 노드를 찾을 수 있는 <code>findDOMNode</code>를 지원하였었다. 이제는 DOM 노드에 바로 ref를 지정할 수 있기 때문에 보통 필요로 하지 않는다.</p>
<br />



<h5 id="예상치-못한-부작용-검사"><a href="#예상치-못한-부작용-검사" class="headerlink" title="예상치 못한 부작용 검사"></a>예상치 못한 부작용 검사</h5><p>개념적으로 React는 두 단계로 동작한다.</p>
<ul>
<li><code>렌더링 단계</code> 는 특정 환경 (DOM과 같은) 에 어떤 변화가 필요한 지 결정하는 단계로, 이 과정에서 React는 <code>render</code> 를 호출하여 이전 렌더와 결과값을 비교한다.</li>
<li><code>커밋 단계</code> 는 React가 변경 사항을 반영하는 단계로 (React DOM의 경우 React가 DOM 노드를 추가, 변경 및 제거하는 단계), 이 단계에서 React는 <code>componentDidMount</code> 나 <code>componentDidUpdate</code> 와 같은 생명주기 메서드를 호출한다.</li>
</ul>
<p>커밋 단계는 일반적으로 매우 빠르지만, 렌더링 단계는 느릴 수 있어 문제가 발생할 수 있다.</p>
<p><img width="349" align="center" alt="Screenshot 2021-05-30 at 20 45 33" src="https://user-images.githubusercontent.com/49134038/120103031-a0a7da00-c188-11eb-92d0-a1ca76acb969.png">)</p>
<p>특히 위의 메서드들은 여러 번 호출될 수 있기 때문에, 부작용을 포함하지 않는 것이 중요하다. Strict 모드가 자동으로 부작용을 찾아주는 것은 불가능하지만, 조금 더 예측할 수 있게끔 만들어서 문제가 되는 부분을 발견할 수 있게 도와준다. </p>
<p>이를 위해 다음과 같은 함수를 의도적으로 이중으로 호출하여 찾을 수 있다.</p>
<ul>
<li>클래스 컴포넌트의 <code>constructor</code>, <code>render</code> 그리고 <code>shouldComponentUpdate</code> 메서드</li>
<li>클래스 컴포넌트의 <code>getDerivedStateFromProps</code> static 메서드</li>
<li>함수 컴포넌트 바디</li>
<li>State updater 함수 (<code>setState</code>의 첫 번째 인자)</li>
<li><code>useState</code>, <code>useMemo</code> 그리고 <code>useReducer</code>에 전달되는 함수</li>
</ul>
<br />



<h5 id="레거시-context-API-검사"><a href="#레거시-context-API-검사" class="headerlink" title="레거시 context API 검사"></a>레거시 context API 검사</h5><p>레거시 context API는 오류가 발생하기 쉬워 이후 릴리즈에서 삭제될 예정이다.</p>
<p><img src="https://ko.reactjs.org/static/fca5c5e1fb2ef2e2d59afb100b432c12/51800/warn-legacy-context-in-strict-mode.png" alt="2"></p>
<br />



<hr>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode</a></p>
<p><a target="_blank" rel="noopener" href="https://ko.reactjs.org/docs/strict-mode.html">https://ko.reactjs.org/docs/strict-mode.html</a></p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/05/31/strict-mode/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/05/29/7%EC%B0%A8-%EC%84%B8%EB%AF%B8%EB%82%98-29-05-21/"
                            aria-label=": 7차-세미나_29-05-21"
                        >
                            7차-세미나_29-05-21
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-05-29T23:11:53+09:00">
	
		    May 29, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/SOPT/">SOPT</a>, <a class="category-link" href="/categories/SOPT/WEB-28th/">WEB_28th</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="React-UI-Library-사용법"><a href="#React-UI-Library-사용법" class="headerlink" title="React UI Library 사용법"></a>React UI Library 사용법</h2><h3 id="Ant-Design"><a href="#Ant-Design" class="headerlink" title="Ant Design"></a>Ant Design</h3><h3 id="Material-UI"><a href="#Material-UI" class="headerlink" title="Material UI"></a>Material UI</h3> <br />



<h2 id="CORS"><a href="#CORS" class="headerlink" title="CORS"></a>CORS</h2><blockquote>
<p>Same-Origin Policy</p>
</blockquote>
<p>웹 브라우저 보안을 위해 프로토콜, 도메인, 포트가 동일한 서버로만 요청을 주고 받을 수 있는 정책</p>
<p>👇</p>
<blockquote>
<p>Cross-Origin Resource Sharing</p>
</blockquote>
<p>도메인이나 포트가 달라도 서버에 자원을 요청할 수 있는 메커니즘</p>
<p>![image-20210529152418689](/Users/JungHyunLah/Library/Application Support/typora-user-images/image-20210529152418689.png)</p>
<p>아래와 같은 문제 발생 시; 서버에서 Access-Control-Allow-Origin을 수정해야 함!</p>
<p>![image-20210529152436081](/Users/JungHyunLah/Library/Application Support/typora-user-images/image-20210529152436081.png)</p>
<br />



<h2 id="Redux-기초"><a href="#Redux-기초" class="headerlink" title="Redux 기초"></a>Redux 기초</h2><ol>
<li>예측 가능한</li>
<li>중앙화된</li>
<li>디버깅이 쉬운</li>
<li>유연한</li>
</ol>
<ul>
<li>자바스크립트 앱을 위한 예측 가능한 상태 컨테이너 (오픈소스 JS 라이브러리)</li>
<li>React, Vue 등 JS 라이브러리와 함께 사용된다.</li>
</ul>
<h4 id="언제-왜-사용할까"><a href="#언제-왜-사용할까" class="headerlink" title="언제, 왜 사용할까?"></a>언제, 왜 사용할까?</h4><ul>
<li>기존에는 useState를 통해 정의한 상태를 props를 통해 자식 컴포넌트로 전달하는 구조</li>
<li>프로젝트가 복잡해지면 거쳐야 하는 컴포넌트가 많아지므로 상태 전달이 비효율적일 수 있음</li>
</ul>
<p>👇</p>
<ol>
<li>상태 관리를 한 곳에서 하고 싶을 때</li>
<li>원하는 컴포넌트에 상태값과 함수를 직접 전달하고 싶을 때</li>
</ol>
<h4 id="전체적인-구조"><a href="#전체적인-구조" class="headerlink" title="전체적인 구조"></a>전체적인 구조</h4><ol>
<li>store</li>
<li>action</li>
<li>reducer</li>
<li>store 내장 함수</li>
</ol>
<h4 id="store"><a href="#store" class="headerlink" title="store"></a>store</h4><ul>
<li>어플리케이션의 상태는 하나의 저장소 안에 있는 객체 트리에 저장된다.</li>
<li>상태 트리는 </li>
</ul>
<h4 id="action"><a href="#action" class="headerlink" title="action"></a>action</h4><h4 id="reducer"><a href="#reducer" class="headerlink" title="reducer"></a>reducer</h4><ul>
<li>실질적인 함수</li>
<li>action이 상태 트리를 어떻게 변경할 지 작성한 순수한 함수</li>
</ul>
<h3 id="Redux는-꼭-필요할-때-사용하자"><a href="#Redux는-꼭-필요할-때-사용하자" class="headerlink" title="Redux는 꼭 필요할 때 사용하자!"></a>Redux는 꼭 필요할 때 사용하자!</h3><ol>
<li>지속적으로 상태가 변화하는 데이터가 많을 때</li>
<li>모든 상태를 한 곳에서 관리해야 할 때</li>
<li>최상위 컴포넌트에서 모든 상태를 가지고 있기 힘들 때</li>
</ol>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/05/29/7%EC%B0%A8-%EC%84%B8%EB%AF%B8%EB%82%98-29-05-21/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/05/29/7%EC%B0%A8-%EC%84%B8%EB%AF%B8%EB%82%98-Closure/"
                            aria-label=": Closure"
                        >
                            Closure
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-05-29T20:08:44+09:00">
	
		    May 29, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/SOPT/">SOPT</a>, <a class="category-link" href="/categories/SOPT/WEB-28th/">WEB_28th</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="Closures"><a href="#Closures" class="headerlink" title="Closures"></a>Closures</h2><br />



<p><em><strong>클로저란?</strong></em></p>
<p>함수 번들과 이들이 <u>참조하는 주변 상태 ( <code>lexical environment</code> 라 칭한다)</u> 의 조합을 의미한다. </p>
<p>쉽게 말하자면, 클로저는 독립적인 (자유) 변수를 가리키는 함수로, 클로저 안에 정의된 함수는 만들어진 환경을 기억한다. 즉, 클로저를 통해 inner function scope 에서 outer function scope에 접근할 수 있으며, JavaScript 에서는 함수가 생성되는 시점에 클로저도 생성된다.</p>
<p>흔히 함수 내에서 함수를 정의하고 사용하면 클로저라고 한다. 하지만 대개는 정의한 함수를 리턴하고 사용은 바깥에서 하게된다.</p>
<p>이해를 돕기 위해 다음 코드를 보자.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getClosure</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> text = <span class="string">&#x27;variable 1&#x27;</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> text;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> closure = getClosure();</span><br><span class="line"><span class="built_in">console</span>.log(closure()); <span class="comment">// &#x27;variable 1&#x27;</span></span><br></pre></td></tr></table></figure>
<p>위에서 정의한 <code>getClosure()</code>는 함수를 반환하고, 반환된 함수는 <code>getClosure()</code> 내부에서 선언된 변수를 참조하고 있다. 또한 이렇게 참조된 변수는 함수 실행이 끝났다고 해서 사라지지 않았고, 여전히 제대로 된 값을 반환하고 있는 걸 알 수 있다. <strong>여기서 반환된 함수가 클로저이다.</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> base = <span class="string">&#x27;Hello, &#x27;</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHelloTo</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> text = base + name;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(text);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> hello1 = sayHelloTo(<span class="string">&#x27;승민&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> hello2 = sayHelloTo(<span class="string">&#x27;현섭&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> hello3 = sayHelloTo(<span class="string">&#x27;유근&#x27;</span>);</span><br><span class="line">hello1(); <span class="comment">// &#x27;Hello, 승민&#x27;</span></span><br><span class="line">hello2(); <span class="comment">// &#x27;Hello, 현섭&#x27;</span></span><br><span class="line">hello3(); <span class="comment">// &#x27;Hello, 유근&#x27;</span></span><br></pre></td></tr></table></figure>
<p>출력된 결과를 보면 <code>text</code> 변수가 동적으로 변화하고 있는 것처럼 보인다. 실제로는 <code>text</code>라는 변수 자체가 여러 번 생성된 것이다. 즉, <code>hello1()</code>과 <code>hello2()</code>, <code>hello3()</code>은 서로 다른 환경을 가지고 있다.</p>
<br />



<h3 id="Lexical-Scoping"><a href="#Lexical-Scoping" class="headerlink" title="Lexical Scoping"></a>Lexical Scoping</h3><p><code>Lexical Scoping</code> 은 함수들이 중첩되어 있을 때, parser가 변수 이름을 어떻게 해석하는지에 대해 설명한다. 즉, lexical scope는 중첩 함수가 연속적으로 존재하는 그룹에서, inner function이 그의 parent scope의 변수를 포함한 자원들에 접근이 가능함을 의미한다. 결국 자식 함수들이 부모 함수가 실행되는 문맥에 <em>어휘적으로 묶이는 것</em> 을 의미한다.  이를 <code>static scope</code> 라고 칭하기도 한다.</p>
<p>이를 직관적으로 이해하기 위해 다음 코드를 보자.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">grandfather</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">&#x27;Hammad&#x27;</span>;</span><br><span class="line">    <span class="comment">// &#x27;likes&#x27; is not accessible here</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">parent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// &#x27;name&#x27; is accessible here</span></span><br><span class="line">        <span class="comment">// &#x27;likes&#x27; is not accessible here</span></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">child</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="comment">// Innermost level of the scope chain</span></span><br><span class="line">            <span class="comment">// &#x27;name&#x27; is also accessible here</span></span><br><span class="line">            <span class="keyword">var</span> likes = <span class="string">&#x27;Coding&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>위 예시에서 lexical scope은 forward 방향으로 작동한다는 것을 알 수 있다. 이는 child 함수가 실행될 때 해당 문맥에 name 변수가 포함되어 접근이 가능하다는 것을 의미한다. 하지만 반대로, backward로는 작동하지 않기 때문에 likes는 child의 부모 함수에서 접근이 불가능하다.</p>
<p>이는 같은 이름을 가졌지만 다른 실행 문맥을 가진 변수들이 위에서부터 아래로 코드가 작동하면서 실행 스택 (execution stack) 에 선행 값들 (우선순위) 을 가지고 있음을 의미한다. 이 때 같은 이름을 가진 변수의 경우 안쪽에 존재하는 함수 (실행 스택에서 위쪽에 존재하는 문맥, 함수) 일수록 높은 우선순위를 가진다.</p>
<p>다른 예시를 보자.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name = <span class="string">&#x27;Mozilla&#x27;</span>; <span class="comment">// name is a local variable created by init</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">displayName</span>(<span class="params"></span>) </span>&#123; <span class="comment">// displayName() is the inner function, a closure</span></span><br><span class="line">    alert(name); <span class="comment">// use variable declared in the parent function</span></span><br><span class="line">  &#125;</span><br><span class="line">  displayName();</span><br><span class="line">&#125;</span><br><span class="line">init();</span><br></pre></td></tr></table></figure>
<p>위 코드에서,</p>
<ul>
<li><code>outer(parent) function</code> 은 <code>init()</code> 이 되고,</li>
<li><code>inner(child) function</code> 은 <code>displayName()</code> 이 된다.</li>
</ul>
<p><code>init</code> 함수가 지역변수인 <code>name</code> 과 <code>displayName</code> 함수를 생성한다. 이 때, displayName은 init 안에 정의된 inner function 이므로 init 내에서만 작동할 수 있다. 특히 해당 함수는 그만의 지역 변수를 생성하지 않는데, inner function의 경우 outer function의 변수에 접근할 수 있으므로 displayName은 그의 parent function인 init 함수의 지역변수인 name에 접근할 수 있다.</p>
<br />



<h3 id="Closure"><a href="#Closure" class="headerlink" title="Closure"></a>Closure</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeFunc</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name = <span class="string">&#x27;Mozilla&#x27;</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">displayName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(name);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> displayName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> myFunc = makeFunc();</span><br><span class="line">myFunc();</span><br></pre></td></tr></table></figure>
<p>위와 동일한 코드이지만, displayName이 실행되기 전 outer function에서 반환된다는 점이 다르다.</p>
<p>보통 함수의 실행이 끝나면 그 내부에 있는 지역변수에 더이상 접근이 불가한 것이 일반적인 경우이지만, 위 코드에서는 makeFunc의 실행이 종료되어도 name 변수에 접근이 가능하다. </p>
<p>그 이유는 JavaScript의 함수는 클로저를 생성하기 때문이다. 클로저는 앞서 말했듯이 함수와 해당 함수가 선언된 lexical environment을 아울러 정의하는데, 이 ‘환경’ 은 클로저가 생성된 그 시기의, in-scope에 해당하는 모든 지역변수를 포함한다.</p>
<p>따라서 위 코드의 경우, myFunc은 makeFunc이 실행될 때 생성된 displayName instance의 참조변수이며, displayName 인스턴스는 그의 lexical environment - name 변수가 존재하는 - 를 지속적으로 참조 (유지) 한다. 따라서, myFunc이 호출되었을 때 name 변수에 계속해서 접근 가능하므로 alert에 “Mozilla”가 전달된다.</p>
<p>또 다른 예시를 보자.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeAdder</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> add5 = makeAdder(<span class="number">5</span>);</span><br><span class="line"><span class="keyword">var</span> add10 = makeAdder(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(add5(<span class="number">2</span>));  <span class="comment">// 7</span></span><br><span class="line"><span class="built_in">console</span>.log(add10(<span class="number">2</span>)); <span class="comment">// 12</span></span><br></pre></td></tr></table></figure>
<p>위 코드에서는 하나의 인자 x 를 받는 makeAdder(x) 함수가 존재하고, 이는 또 다시 다른 하나의 인자 y 를 받아 x와 y의 합을 반환하는 함수를 반환한다. 결국 makeAdder는 함수 공장으로 작용하는데, 이는 특정 값(y) 을 인자(x) 에 더하는 함수를 생성한다.</p>
<p>위 예시에서는 2개의 함수가 생성되는데,</p>
<ul>
<li><code>add5</code> : 하나는 5를 그의 인자에 더하는 함수이고</li>
<li><code>add10</code> : 다른 하나는 10을 더하는 함수이다.</li>
</ul>
<p><code>add5</code> 와 <code>add10</code> 은 모두 클로저이다. 이들은 같은 body를 가진 함수를 공유하지만 다른 lexical environment를 가진다. 이는 <code>add5</code> 의 lexical environment는 x=5이고, <code>add10</code> 에서는 x=10 임을 의미한다.</p>
<br />



<h3 id="Closure-Scope-Chain"><a href="#Closure-Scope-Chain" class="headerlink" title="Closure Scope Chain"></a>Closure Scope Chain</h3><p>모든 클로저는</p>
<ol>
<li>Local Scope (Own Scope)</li>
<li>Outer Functions Scope</li>
<li>Global Scope</li>
</ol>
<p>를 가진다.</p>
<p>주의해야 할 부분은 outer function이 중첩된 함수 (중 하나) 일 경우에, 해당 함수의 scope에 접근하는 것은 그를 둘러싼 scope 또한 포함한다는 것 - 결국 함수 scope의 chain을 생성한다 - 이다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// global scope</span></span><br><span class="line"><span class="keyword">var</span> e = <span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">b</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">c</span>)</span>&#123;</span><br><span class="line">      <span class="comment">// outer functions scope</span></span><br><span class="line">      <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">d</span>)</span>&#123;</span><br><span class="line">        <span class="comment">// local scope</span></span><br><span class="line">        <span class="keyword">return</span> a + b + c + d + e;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(sum(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>)(<span class="number">4</span>)); <span class="comment">// log 20</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// You can also write without anonymous functions:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// global scope</span></span><br><span class="line"><span class="keyword">var</span> e = <span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">sum2</span>(<span class="params">b</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">sum3</span>(<span class="params">c</span>)</span>&#123;</span><br><span class="line">      <span class="comment">// outer functions scope</span></span><br><span class="line">      <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">sum4</span>(<span class="params">d</span>)</span>&#123;</span><br><span class="line">        <span class="comment">// local scope</span></span><br><span class="line">        <span class="keyword">return</span> a + b + c + d + e;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s = sum(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">var</span> s1 = s(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">var</span> s2 = s1(<span class="number">3</span>);</span><br><span class="line"><span class="keyword">var</span> s3 = s2(<span class="number">4</span>);</span><br><span class="line"><span class="built_in">console</span>.log(s3) <span class="comment">// log 20</span></span><br></pre></td></tr></table></figure>
<p>위 예시에서는 중첩 함수가 연속적으로 정의되어 있으며 이들은 모두 outer function scope에 접근이 가능하다. 이 때, 클로저는 모든 outer function scope에 접근 가능하다고 정의된다.</p>
<br />



<hr>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures</a></p>
<p><a target="_blank" rel="noopener" href="https://hyunseob.github.io/2016/08/30/javascript-closure/">https://hyunseob.github.io/2016/08/30/javascript-closure/</a></p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/05/29/7%EC%B0%A8-%EC%84%B8%EB%AF%B8%EB%82%98-Closure/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/05/28/ERP-Overview/"
                            aria-label=": Encoder-Decoder Seq2Seq2 Model을 이용한 Data Visualization 추천 시스템"
                        >
                            Encoder-Decoder Seq2Seq2 Model을 이용한 Data Visualization 추천 시스템
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-05-28T00:42:19+09:00">
	
		    May 28, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Graduation-Project/">Graduation Project</a>, <a class="category-link" href="/categories/Graduation-Project/About/">About</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>이 글은 이화여자대학교 2021-1학기 캡스톤디자인프로젝트B - 스타트7팀(이화BTS) 나정현의 기술 블로그 제출물입니다. 본 팀은 “ERP: Customizing Recommended Data Visualization Plots” 을 주제로 웹 서비스를 제작 중에 있으며, 해당 서비스는 Data2Vis의 Encoder-Decoder 모델, Seq2Seq2 모델에 기반하여 Plot 추천 시스템을 제공합니다.</p>
<blockquote>
<p>GitHub 소스코드 : <a target="_blank" rel="noopener" href="https://github.com/Ewha-BTS/ERP">https://github.com/Ewha-BTS/ERP</a></p>
<p>(※ 현재 비공개인 상태입니다.)</p>
</blockquote>
<br />



<hr style="margin: 0 auto; height: auto; width: 50%; border-bottom: 5px solid lightblue" />

<br />



<h2 align="center">
  Project Overview
</h2>

<p>들어가기 앞서, <em>Visualization Recommender System이란 무엇일까?</em></p>
<p>이는 이름 그대로, 전문가가 일일이 차트를 만들지 않아도 제공되는 차트 리스트 중에 가장 적합한 것을 고를 수 있도록, 자동적으로 차트를 만들어 주는 추천 시스템이다.</p>
<p>본 팀은 큰 데이터셋과 이와 관련된 차트를 이용하여 학습시킨 모델을 통해 시각화 타입과 디자인 초이스를 추천해주는 시스템을 설계하고, 이를 웹에 올려 웹 서비스로서 Visualization 추천 시스템을 제공하는 ERP를 제작하고자 한다.</p>
<br />



<p>data를 활용하는 일이 급진적으로 증가하고 있고, 이에 따라 data specialist도 많아지고 있다. 이 트렌드에 맞게 굳이 플랏을 그리기까지의 모든 과정을 다 컨트롤하지 않아도 (길었지만, 흔히 <em>노가다</em> 라고 합니다..) 자동적으로 플랏을 추천해주는 서비스에 대한 요구도 증가하고 있다. 실제로 이에 가장 유명한 서비스는 <strong>Tableau</strong> 인데, 직접 사용해 본 결과 UI 도 복잡하고 UX도 좋지 못하다고 느꼈다. 하나의 윈도우에 너무 많은 정보가 한꺼번에 떠있는 느낌이었고, UX 플로우가 원활하지 못해 그리는 동안 엑셀에 엔터가 안 쳐지는 것과 비슷한 불편함을 느꼈다.</p>
<img src="https://nova-praxis.com/wp-content/uploads/2018/08/tableau-desktop.png" align="center" />

<br />



<p>이를 보완하기 위해, 최근 핫하고 사용성으로 유명한 <strong>노션</strong> 의 UI와 UX를 차용하여 위 서비스를 사용자 중심 서비스로 탈바꿈하는 것이 어떨까, 생각하였다. 여기에 연구 결과(성능)가 좋아 사용하고 싶었던 Data2Vis 모델을 이용하고, 부족했다고 느꼈거나 원했던 점도 추가해 볼 예정이다. </p>
<p>더하여, - 노션이 가진 최대 장점이라고 생각하는 - 자유자재로 element를 배치하여 활용할 수 있는 대시보드의 편리함을 서비스의 2번째 메인 기능으로 제공하고자 한다. 사용자가 임의로 플랏을 그릴 수 있는 기능을 마지막 메인 기능으로 추가할 예정이다.</p>
<p>이렇게 총 3가지의 메인 기능을 가지고 있는 본 팀의 서비스는 가장 중요한 분야 중 하나인 data 의 활용을 돕고 사용성을 증대시키고자 하며, 이를 통해 전문가가 데이터를 활용함에 있어서 중요한 부분에 집중할 수 있도록 돕고자 한다.</p>
<hr>
<br />



<p>🌝 그럼, 이제부터 전체적인 data 플로우와 웹 UI, 사용한 테크 스택, 실행 방법 및 데모 등에 대해 소개해보겠다.</p>
<br />



<hr style="margin: 0 auto; height: auto; width: 50%; border-bottom: 5px solid lightblue" />

<br />



<h2 align="center">
  Model
</h2>
전체적인 서비스의 흐름도를 ~~아주, 아주!~~ 간단하게 표현해보자면 다음과 같다.

<img src="https://user-images.githubusercontent.com/49134038/119963054-9fd54380-bfe2-11eb-9e07-e09f81442ae2.png" align="center" />

<p>일단 사용자는 플랏으로 그리고자 하는 데이터가 배열에 담긴 <code>.json</code> <code>.csv</code> 과 같은 유형의 data 파일을 input으로 넣는다. </p>
<p>해당 데이터는 앞으로 설명하게 될 Encoder-Decoder과 Seq2Seq2 모델을 기반으로 한 모델을 통해 플랏으로 그려진다. 이 때 데이터는 한개의 플랏이 아닌 모델에서 제시하는 추천 플랏들 k (임의 설정) 개로 표현된다. </p>
<p>이를 토대로 사용자가 원하는 플랏을 선택한 후 세부적인 사항을 조정한 뒤 저장하면, 사용자의 ‘마이 리스트’에 해당 플랏이 저장되어 메인 대시보드에서 이를 이용할 수 있다. 이 때 이용이란, 그래프를 격자 형태를 가진 대시보드에 임의로 배치하고 크기 등을 조정하여 서로 연관된 플랏들을 한눈에 파악 가능하도록 하는 것을 의미한다.</p>
<br />



<p>본 팀이 베이스로 사용하게 될 모델은 Vega-Lite를 기반으로 한 Data2Vis 모델이다. 이에 대해 자세히 알아보자.</p>
<br />



<h3 align="center">
  Data2Vis
</h3>
Data2Vis를 이해하기 위해, 이와 연관된 연구이자 기본에 충실해 Data Visualization에 대한 이해도를 높일 수 있는 [VizML](https://leahincom.github.io/2021/05/19/VizML-paper-review/) 논문을 리뷰하였으며, 이후 [Data2Vis](https://leahincom.github.io/2021/05/21/Data2Vis-paper-review/) 논문을 리뷰하였다. 이와 관련한 요약본은 다음과 같다.

<img src="https://user-images.githubusercontent.com/49134038/119963038-9ba92600-bfe2-11eb-8c5f-39470599d533.png" align="center" />

<p>이 때, 모델에 학습시킬 데이터셋 마련을 위해 양질의 데이터를 크롤링하는 데 한계가 있다고 판단하여, 오픈 소스로 공개되어 있는 Vega-Lite 기반의 Data2Vis의 데이터셋을 이용하여 1차적으로 training 시켰으며, 이후 Plotly 기반의 VizML 데이터셋을 이용하여 Plotly JavaScript 라이브러리를 이용하여 프론트엔드를 구현할 예정이다.</p>
<br />



<h3 align="center">
  Specification
</h3>

<p>Data2Vis의 examplesdata에서 가져온 <code>airports.json</code> 의 structure는 다음과 같다.</p>
<img width="270" align="center" alt="Screenshot 2021-05-28 at 11 27 09" src="https://user-images.githubusercontent.com/49134038/119962945-82a07500-bfe2-11eb-990d-977c30f77808.png">

<p>해당 데이터를 plot으로 그리기 위해 사용된 Vega-Lite grammer은 다음과 같다.</p>
<img src="https://user-images.githubusercontent.com/49134038/119963347-f2aefb00-bfe2-11eb-81a4-675a45ae2e4a.png" align="center" />

<p>위와 같은 그래머를 training data로 학습시킨 모델이 Vega Editor를 통해 그린 plot들은 다음과 같다.</p>
<img width="326" align="center" alt="Screenshot 2021-05-28 at 11 32 10" src="https://user-images.githubusercontent.com/49134038/119962929-7fa58480-bfe2-11eb-95be-86348a07ce79.png">

<hr>
<br />



<p>결론적으로, 본 팀이 사용하고자 하는 모델의 <code>input</code> 과 <code>output</code> , <code>dataset</code> 및 <code>model 개요</code> 는 다음과 같다.</p>
<table>
  <thead>
      <th>
        input
    </th>
    <th>
        model
    </th>
    <th>
        output
    </th>
    <th>
        dataset
    </th>
  </thead>
  <tbody>
      <tr>
        <td>
          1개의 dataset(.csv)
      </td>
      <td>
          Seq2Seq + Encoder-Decoder Model
      </td>
      <td>
          visualization recommended plots (Top-k개)
      </td>
      <td>
          Data2Vis의 dataset
      </td>
    </tr>
  </tbody>
</table>


<blockquote>
<p><code>input</code> dataset의 경우 <code>Training : Eval : Test = 0.8 : 0.1 : 0.1</code> 의 비율로 구성한다.</p>
</blockquote>
 <br />



<hr style="margin: 0 auto; height: auto; width: 50%; border-bottom: 5px solid lightblue" />

<br />



<h2 align="center">
  WEB
</h2>



<h3 align="center">
  Guideline
</h3>
1. 먼저, 소스를 받기 위해 `git clone` 으로 모든 파일을 local server로 가져온다.
2. 이후, 필요한 모든 npm package를 다운받아 프로젝트를 run할 준비를 마친다.
3. 아직 배포를 하지 않은 상태이므로, localhost로 실행하기 위해 client 폴더로 이동한다.
4. client를 실행시킨다.

<blockquote>
<p>※ 자동으로 브라우저가 실행되지 않는 경우, <code>http://localhost:3000</code> 를 주소창에 입력하여 프론트를 확인해 주세요.</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/Ewha-BTS/ERP.git</span><br><span class="line">npm i</span><br><span class="line"><span class="built_in">cd</span> erp-client</span><br><span class="line">npm start</span><br></pre></td></tr></table></figure>
<br />




<h3 align="center">
  Front-end
</h3>


<h4 id="Tech-Stack"><a href="#Tech-Stack" class="headerlink" title="Tech Stack"></a>Tech Stack</h4><ul>
<li>React.js</li>
<li>Recoil</li>
<li>styled-components (SASS 기반)</li>
<li>axios</li>
</ul>
<br />



<h4 id="Structure"><a href="#Structure" class="headerlink" title="Structure"></a>Structure</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">public/</span><br><span class="line">	├ index.html</span><br><span class="line">src/</span><br><span class="line">	├ assets/</span><br><span class="line">	├ components/</span><br><span class="line">		├ common/</span><br><span class="line">			├ TabBar.js</span><br><span class="line">		├ main/</span><br><span class="line">			├ Dashboard.js</span><br><span class="line">			├ Graph.js</span><br><span class="line">			├ DetailBar.js</span><br><span class="line">			├ RecBar.js</span><br><span class="line">			├ MyList.js</span><br><span class="line">	├ lib/</span><br><span class="line">		├ api.js</span><br><span class="line">		├ state.js</span><br><span class="line">	├ pages/</span><br><span class="line">		├ MainDashboard.js</span><br><span class="line">		├ UserDefine.js</span><br><span class="line">		├ Recommendation.js</span><br><span class="line">		├ MyPage.js</span><br><span class="line">	├ App.js</span><br><span class="line">	├ index.css</span><br><span class="line">	├ index.js</span><br></pre></td></tr></table></figure>
<br />



<h4 id="UI"><a href="#UI" class="headerlink" title="UI"></a>UI</h4><img src="https://user-images.githubusercontent.com/49134038/119962895-77e5e000-bfe2-11eb-880b-a48b9ad377df.png" align="center" />

<img src="https://user-images.githubusercontent.com/49134038/119962892-774d4980-bfe2-11eb-9671-bab8b26d06d8.png" align="center" />

<img src="https://user-images.githubusercontent.com/49134038/119962878-73b9c280-bfe2-11eb-8c03-cd949f703642.png" align="center" />

<br />



<h4 id="Details"><a href="#Details" class="headerlink" title="Details"></a>Details</h4><h5 id="Recoil"><a href="#Recoil" class="headerlink" title="Recoil"></a>Recoil</h5><p>component 내 data 이동이 많아 state를 유연하게 관리하기 위해 필자는 Recoil을 사용하였다. App.js에서 state 관리가 이루어지기 때문에 index.js 에서 컴포넌트를  <code>RecoilRoot</code> 로 감싼 후, data 이동을 관리하였다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; RecoilRoot &#125; <span class="keyword">from</span> <span class="string">&quot;recoil&quot;</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;React.StrictMode&gt;</span><br><span class="line">    &lt;RecoilRoot&gt;</span><br><span class="line">      &lt;App /&gt;</span><br><span class="line">    &lt;/RecoilRoot&gt;</span><br><span class="line">  &lt;/React.StrictMode&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&quot;root&quot;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<br />



<h5 id="Axios"><a href="#Axios" class="headerlink" title="Axios"></a>Axios</h5><p>server와의 통신을 위해 필자는 <code>axios</code> 를 사용하였다. 기본적으로 생성한 객체는 다음과 같다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> instance = axios.create(&#123;</span><br><span class="line">  baseURL: <span class="string">&quot;http://203.255.176.80:5016&quot;</span>,</span><br><span class="line">  timeout: <span class="number">1000</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>세부적인 API는 서버가 구축된 후 구현할 예정이다.</p>
<br />




<h3 align="center">
  Back-end
</h3>

<p>서버의 경우 Data2Vis의 웹 데모 오픈 소스에서 <code>webserver.py</code> 를 본 팀의 프론트엔드에 맞게  변형하여 라우팅 및 기능을 구현하였으며, 모델의 경우 직접 학습시킨 <code>model.ckpt-15000</code> 을 연동시켰다.</p>
<br />



<hr style="margin: 0 auto; height: auto; width: 50%; border-bottom: 5px solid lightblue" />

<br />



<h2 align="center">
  Conclusion
</h2>
본 팀은 현재 Recommendation System Model을 서버에 올려 메인 기능인 "추천 플랏 보여주기" 을 구현하였다.

<p>이후,</p>
<ol>
<li>남은 메인 기능 구현</li>
<li>그에 따른 서버 연동</li>
<li>모델 수정</li>
<li>배포</li>
</ol>
<p>등을 수행하고, 이 과정에서 Plotly 와 같은 다양한 모델과 그에 따른 JavaScript 라이브러리를 이용하여 더 나은 서비스를 구축할 예정이다. 결론적으로 목표하는 바는 Customizing Recommended Data Visualization Plots 을 제공하는 서비스의 완성도를 높이고 직접 배포한 후 유지, 보수 관리를 꾸준히 이어나가는 것이다.</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/05/28/ERP-Overview/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/05/27/THUREE-Redux/"
                            aria-label=": Redux"
                        >
                            Redux
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-05-27T20:56:54+09:00">
	
		    May 27, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/SOPT/">SOPT</a>, <a class="category-link" href="/categories/SOPT/THUREE/">THUREE</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p style="color: orange; font-weight: bold;">많은 상태를 관리할 필요가 생겨났다.</p>

<blockquote>
<p> <code>상태</code> </p>
<p> 서버 응답, 캐시 데이터, 지역적으로 생성해서 사용하고 있지만 아직 서버에 저장되지 않은 데이터,</p>
<p> 활성화된 라우트, 선택된 탭, 로딩을 보여줄지 여부, 페이지네이션 컨트롤 등 다양한 UI 상태</p>
</blockquote>
<p>모델이 다른 모델을 업데이트하고, 그리고 뷰가 모델을 업데이트 할 수 있고, 이 뷰가 다시 다른 모델을 업데이트하고, 이에 따라 또 다른 뷰가 업데이트 된다.</p>
<p>더하여, <strong>프론트엔트 제품 개발에 있어서 새로 갖춰야할 복잡한 요건들이 늘어나고 있다.</strong> 낙관적 업데이트(Optimistic update), 서버 렌더링, 라우트가 일어나기 전에 데이터 가져오기 등이 이에 해당한다. 이러한 복잡함은 <code>변화(mutation)</code> 나 <code>비동기(asyncronicity)</code> 와 같이 사람이 연동하여 추론하기 어려운 개념을 <em>섞어서 사용한다</em> 는 데서 비롯된다.</p>
<blockquote>
<p><strong>비관적(pessimistic) 업데이트</strong></p>
<p><code>사용자 입력 -&gt; 수정 요청 -&gt; 성공 시 화면 갱신</code></p>
<ul>
<li>사용자에게는 불편하지만, 개발자에게는 쉬움</li>
</ul>
<p><strong>낙관적(optimistic) 업데이트</strong></p>
<p><code>사용자 입력 -&gt; 바로 화면 먼저 갱신 -&gt; 수정 요청</code></p>
<ul>
<li>e.g. slack, trello</li>
</ul>
</blockquote>
<br />



<h3 style="color: purple">Redux</h3>

<ul>
<li><p>자바스크립트 앱을 위한 <strong>예측 가능한 상태 컨테이너</strong></p>
</li>
<li><p><strong>일관적</strong>, 서로 <strong>다른 환경</strong>(서버, 클라이언트, 네이티브)에서 작동, <strong>테스트하기 쉬운</strong> 앱 작성을 도와준다.</p>
</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npx create-react-app my-app --template redux</span><br><span class="line">npm install redux</span><br></pre></td></tr></table></figure>
<br />



<ol>
<li><p><strong>애플리케이션의 모든 <u>상태</u>는 하나의 <u>저장소</u> 안에 하나의 <u>객체 트리 구조</u>로 저장</strong></p>
<ul>
<li>범용적인 애플리케이션(universal application, 하나의 코드 베이스로 다양한 환경에서 실행 가능한 코드)을 만들기 쉽다.</li>
<li>서버로부터 가져온 <code>상태</code> 는 연결되거나(serialized) 수화되어(hydrated) 전달되며 클라이언트에서 추가적인 코딩 없이도 사용할 수 있다.</li>
</ul>
</li>
<li><p><strong>상태를 변화시키는 유일한 방법은 무슨 일이 벌어지는 지를 묘사하는 <u>액션</u> 객체를 전달하는 방법뿐</strong></p>
<ul>
<li>뷰나 네트워크 콜백 등에서 상태를 직접 바꾸지 못 하도록 보장한다.</li>
</ul>
</li>
<li><p><strong>변화는 <u>순수 함수</u>로 작성되어야</strong></p>
<ul>
<li><code>reducer</code>는 <code>이전 상태</code> 와 <code>액션</code> 을 받아 다음 상태를 반환하는 순수 함수이다. 이 때, 이전 상태를 변경하는 대신 <strong>새로운 상태 객체를 생성</strong>해서 반환해야한다.</li>
<li>처음에는 하나의 reducer 만으로 충분하지만, 애플리케이션이 성장해나가면 상태 트리의 특정한 부분들을 조작하는 더 <strong>작은 개별적인 리듀서들</strong>로 나누는 것도 가능하다. (React 의 경우 하나의 루트 컴포넌트에서 시작해서 여러 작은 컴포넌트의 조합으로 나누는 것과 동일)</li>
</ul>
</li>
</ol>
<br />



<h2 id="Concepts"><a href="#Concepts" class="headerlink" title="Concepts"></a>Concepts</h2><h3 id="상태"><a href="#상태" class="headerlink" title="상태"></a>상태</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type State &#x3D; any</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>상태</strong>(<strong>상태 트리</strong>)는 넓은 의미의 단어이지만, Redux API에서는 보통 저장소에 의해 관리되고 <a target="_blank" rel="noopener" href="https://ko.redux.js.org/api/store#getState"><code>getState()</code></a>에 의해 반환되는 <em>하나의 상태값</em> 을 지칭한다.</p>
</li>
<li><p>(넓은 의미의) 상태는 Redux 애플리케이션의 <em>전체 상태</em> 를 나타내며, 보통 <strong>깊게 중첩되어 있는 객체</strong>입니다.</p>
</li>
</ul>
<br />



<h3 id="액션"><a href="#액션" class="headerlink" title="액션"></a>액션</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type Action &#x3D; Object</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>액션</strong>은 상태를 변화시키려는 객체이다.</li>
<li>어떤 형태의 액션이 행해질지 표시하는 <code>type</code> 필드를 가져야 한다. type은 상수로 정의되고 다른 모듈에서 임포트할 수 있다.</li>
</ul>
<br />



<h3 id="리듀서"><a href="#리듀서" class="headerlink" title="리듀서"></a>리듀서</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type Reducer&lt;S, A&gt; &#x3D; (state: S, action: A) &#x3D;&gt; S</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>리듀서</strong>(<strong>리듀싱 함수</strong>)는 <code>누적(state)값</code> 과 <code>(누적될) 값</code> 을 받아서 <em>새로운 누적값을 반환</em> 하는 함수이다. 이들은 값들의 컬렉션을 받아서 하나의 값으로 줄이는데 사용된다.</p>
</li>
<li><p>Redux에서 <strong>누적”값”은 상태 객체이고, 누적”될” 값은 액션</strong>이다. 리듀서는 주어진 이전 상태와 액션에서 <strong>새로운 상태</strong>를 계산한다. </p>
</li>
<li><p>반드시 <em>같은 입력이 있으면 같은 출력을 반환</em> 하는 <strong>순수 함수</strong>여야 한다.</p>
</li>
</ul>
<hr>
<p>![image-20210527130716974](/Users/JungHyunLah/Library/Application Support/typora-user-images/image-20210527130716974.png)</p>
<br />



<h3 id="디스패치-함수"><a href="#디스패치-함수" class="headerlink" title="디스패치 함수"></a>디스패치 함수</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 기본 디스패치 함수</span></span><br><span class="line">type BaseDispatch = <span class="function">(<span class="params">a: Action</span>) =&gt;</span> Action</span><br><span class="line"><span class="comment">// 비동기 디스패치 함수 (보통 디스패치 함수)</span></span><br><span class="line">type Dispatch = <span class="function">(<span class="params">a: Action | AsyncAction</span>) =&gt;</span> any</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>디스패치 함수</strong>는 액션이나 비동기 액션을 받는 함수이다.</p>
<blockquote>
<ol>
<li><p>저장소 인스턴스가 미들웨어를 거치지 않고 제공하는 <strong>기본 <a target="_blank" rel="noopener" href="https://ko.redux.js.org/api/store#dispatchaction"><code>dispatch</code></a> 함수</strong></p>
<ul>
<li><strong>반드시</strong> <em>동기적으로</em> 저장소의 리듀서에 액션을 보내야 한다. 그러면 리듀서는 저장소가 반환한 이전 상태와 함께 새 상태를 계산한다.</li>
<li>👾 리듀서를 사용하기 위해서 액션은 평범한 객체여야 한다.</li>
</ul>
</li>
<li><p>비동기 dispatch 함수 (<strong>보통 dispatch 함수</strong>)</p>
<ul>
<li><em>미들웨어를 통해</em> 디스패치 함수는 <strong>비동기 액션</strong>을 처리할 수도 있다. 미들웨어가 기본 디스패치 함수를 감쌈으로써 액션이나 비동기 액션을 다음 미들웨어에 넘기기 전에, 변환하거나, 지연시키거나, 무시하거나, 해석할 수 있다.</li>
</ul>
</li>
</ol>
</blockquote>
</li>
</ul>
<br />



<h3 id="액션-생산자"><a href="#액션-생산자" class="headerlink" title="액션 생산자"></a>액션 생산자</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type ActionCreator&lt;A, P <span class="keyword">extends</span> any[] = any[]&gt; = <span class="function">(<span class="params">...args: P</span>) =&gt;</span> Action | AsyncAction</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>액션 생산자</strong>는 단지 액션을 만드는 함수이다. 이 때, 액션은 정보의 묶음이고, 액션 생산자는 액션을 만드는 곳이다.</p>
</li>
<li><p>액션 생산자를 호출하면 <em>액션을 만들어낼 뿐 dispatch하지는 않는다.</em> 따라서 저장소를 <strong>변경하기 위해서는 <code>dispatch</code> 함수</strong>를 호출해야 한다.</p>
<ul>
<li>액션 생산자를 호출해 그 결과를 저장소 인스턴스로 바로 dispatch하는 함수를 <strong>바인드된 액션 생산자</strong>라고 부르기도 한다.</li>
<li><strong>비동기 액션</strong>은 디스패치 함수로 보내지는 값이지만 <em>아직 reducer에게 받아들여질 준비가 되어 있지 않아,</em> 기본 <code>dispatch()</code> 함수로 전달되기 전에 미들웨어를 통해 액션(이나 일련의 액션들)으로 바뀌어야 한다.<ul>
<li>이들은 종종 <code>Promise</code> 나 <code>Thunk</code> 와 같은 비동기 기본형으로, 리듀서에게 직접 전달되지는 않지만, 작업이 완료되면 액션을 보낸다.</li>
</ul>
</li>
</ul>
</li>
</ul>
<br />



<h3 id="미들웨어"><a href="#미들웨어" class="headerlink" title="미들웨어"></a>미들웨어</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">type MiddlewareAPI = &#123; <span class="attr">dispatch</span>: Dispatch, <span class="attr">getState</span>: <span class="function">() =&gt;</span> State &#125;</span><br><span class="line">type Middleware = <span class="function">(<span class="params">api: MiddlewareAPI</span>) =&gt;</span> <span class="function">(<span class="params">next: Dispatch</span>) =&gt;</span> Dispatch</span><br></pre></td></tr></table></figure>
<blockquote>
<p>중간 (단계) 역할자</p>
</blockquote>
<ul>
<li>미들웨어는 dispatch 함수를 결합해서 새 dispatch 함수를 반환하는 고차함수이다. </li>
<li>종종 비동기 액션을 액션으로 전환한다.</li>
</ul>
<br />



<h3 id="저장소"><a href="#저장소" class="headerlink" title="저장소"></a>저장소</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">type Store = &#123;</span><br><span class="line">  dispatch: Dispatch,</span><br><span class="line">  getState: <span class="function">() =&gt;</span> State,</span><br><span class="line">  subscribe: <span class="function">(<span class="params">listener: () =&gt; <span class="keyword">void</span></span>) =&gt;</span> <span class="function">() =&gt;</span> <span class="keyword">void</span>,</span><br><span class="line">  replaceReducer: <span class="function">(<span class="params">reducer: Reducer</span>) =&gt;</span> <span class="keyword">void</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>저장소는 애플리케이션의 상태 트리를 가지고 있는 객체이다. <u>reducer 수준 (상태 관리)</u> 에서 결합이 일어나기 때문에, Redux 앱에는 <strong>단 하나의 저장소만</strong> 있어야 한다.<ul>
<li><a target="_blank" rel="noopener" href="https://ko.redux.js.org/api/store#dispatchaction"><code>dispatch(action)</code> </a>: 기본 디스패치 함수</li>
<li><a target="_blank" rel="noopener" href="https://ko.redux.js.org/api/store#getState"><code>getState()</code></a> : 저장소의 현재 상태를 반환</li>
<li><a target="_blank" rel="noopener" href="https://ko.redux.js.org/api/store#subscribelistener"><code>subscribe(listener)</code></a> : 상태가 바뀔 때 호출될 함수를 등록</li>
<li><a target="_blank" rel="noopener" href="https://ko.redux.js.org/api/store#replacereducernextreducer"><code>replaceReducer(nextReducer)</code></a> : 핫 리로딩과 코드 분할을 구현할때 사용</li>
</ul>
</li>
</ul>
<br />



<h3 id="저장소-생산자"><a href="#저장소-생산자" class="headerlink" title="저장소 생산자"></a>저장소 생산자</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type StoreCreator &#x3D; (reducer: Reducer, preloadedState: ?State) &#x3D;&gt; Store</span><br></pre></td></tr></table></figure>
<ul>
<li>Redux 저장소를 만드는 함수</li>
</ul>
<br />



<h3 id="저장소-인핸서"><a href="#저장소-인핸서" class="headerlink" title="저장소 인핸서"></a>저장소 인핸서</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type StoreEnhancer &#x3D; (next: StoreCreator) &#x3D;&gt; StoreCreator</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>저장소 생산자를 결합</strong>하여 강화된 새 저장소 생산자를 반환하는 고차함수</li>
<li>미들웨어와 비슷하게 <em>조합가능</em> 한 방식으로 저장소 인터페이스를 바꿀 수 있도록 한다.</li>
</ul>
<br />



<h2 id="Do-I-really-need"><a href="#Do-I-really-need" class="headerlink" title="Do I really need?"></a>Do I really need?</h2><p>Redux를 사용하기 적절한 때는,</p>
<ul>
<li><strong>계속해서 바뀌는 상당한 양</strong>의 데이터가 있다</li>
<li>상태를 위한 <strong>단 하나의 근원</strong> (루트 저장소) 이 필요하다</li>
<li>최상위 컴포넌트가 <strike><strong>모든 상태를 가지고 있는 것</strong></strike>은 더 이상 적절하지 않다.</li>
</ul>
<br />



<h2 id="Basic-Example"><a href="#Basic-Example" class="headerlink" title="Basic Example"></a>Basic Example</h2><ol>
<li><p>앱의 <strong>상태 전부</strong>는 하나의 저장소(<em>store</em>)안에 있는 객체 트리에 저장된다.</p>
</li>
<li><p><strong>상태 트리를 변경하</strong>는 유일한 방법은 무엇이 일어날지 서술하는 객체인 액션(<em>action</em>)을 보내는 것 뿐이며,</p>
</li>
<li><p><strong>액션이 상태 트리를 어떻게 변경할지</strong> 명시하기 위해 리듀서(<em>reducer</em>)를 작성해야 한다.</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 이것이 (state, action) =&gt; state 형태의 순수 함수인 리듀서입니다.</span></span><br><span class="line"><span class="comment"> * 리듀서는 액션이 어떻게 상태를 다음 상태로 변경하는지 서술합니다.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">counter</span>(<span class="params">state = <span class="number">0</span>, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;INCREMENT&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> state + <span class="number">1</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;DECREMENT&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> state - <span class="number">1</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 앱의 상태를 보관하는 Redux 저장소를 만듭니다.</span></span><br><span class="line"><span class="comment">// API로는 &#123; subscribe, dispatch, getState &#125;가 있습니다.</span></span><br><span class="line"><span class="keyword">let</span> store = createStore(counter)</span><br><span class="line"></span><br><span class="line"><span class="comment">// subscribe()를 이용해 상태 변화에 따라 UI가 변경되게 할 수 있습니다.</span></span><br><span class="line"><span class="comment">// 보통은 subscribe()를 직접 사용하기보다는,</span></span><br><span class="line"><span class="comment">// 뷰 바인딩 라이브러리(예를 들어 React Redux)를 사용합니다.</span></span><br><span class="line"><span class="comment">// 하지만 현재 상태를 localStorage에 영속적으로 저장할 때도 편리합니다.</span></span><br><span class="line">store.subscribe(<span class="function">() =&gt;</span> <span class="built_in">console</span>.log(store.getState())))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 내부 상태를 변경하는 유일한 방법은 액션을 보내는 것뿐입니다.</span></span><br><span class="line"><span class="comment">// 액션은 직렬화할수도, 로깅할수도, 저장할수도 있으며 나중에 재실행할수도 있습니다.</span></span><br><span class="line">store.dispatch(&#123; <span class="attr">type</span>: <span class="string">&#x27;INCREMENT&#x27;</span> &#125;)</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line">store.dispatch(&#123; <span class="attr">type</span>: <span class="string">&#x27;INCREMENT&#x27;</span> &#125;)</span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line">store.dispatch(&#123; <span class="attr">type</span>: <span class="string">&#x27;DECREMENT&#x27;</span> &#125;)</span><br><span class="line"><span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<p>상태를 바로 변경하는 대신, <strong>액션</strong>이라 불리는 평범한 객체를 통해 일어날 변경을 명시한다. </p>
<p>그리고 각각의 액션이 전체 애플리케이션의 상태를 어떻게 변경할지 결정하는 특별한 함수인 <strong>리듀서</strong>를 작성합니다.</p>
<ul>
<li>보통의 Redux 앱에는 <strong>하나의 루트 리듀서 함수를 가진 단 하나의 저장소</strong>가 있다. </li>
</ul>
<br />



<h2 id="Sample"><a href="#Sample" class="headerlink" title="Sample"></a>Sample</h2><p>action은 <code>setter</code> 가 없는 모델(클래스)과 같은 객체이다. 다른 코드가 임의로 이를 수정할 수 없기 때문에, 버그 발생률을 낮춘다.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  todos: [&#123;</span><br><span class="line">    text: &#x27;Eat food&#x27;,</span><br><span class="line">    completed: true</span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    text: &#x27;Exercise&#x27;,</span><br><span class="line">    completed: false</span><br><span class="line">  &#125;],</span><br><span class="line">  visibilityFilter: &#x27;SHOW_COMPLETED&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>state을 바꾸기 위해서는 action을 dispatch 해야 한다.</strong> action은 (플레인) 자바스크립트 객체로 전달한다.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123; type: &#x27;ADD_TODO&#x27;, text: &#x27;Go to swimming pool&#x27; &#125;</span><br><span class="line">&#123; type: &#x27;TOGGLE_TODO&#x27;, index: 1 &#125;</span><br><span class="line">&#123; type: &#x27;SET_VISIBILITY_FILTER&#x27;, filter: &#x27;SHOW_ALL&#x27; &#125;</span><br></pre></td></tr></table></figure>
<p>이렇게 모든 변화를 action으로 표현하는 것은 앱의 세부적인 변화부터 전체적인 변화까지 파악할 수 있도록 한다.</p>
<p>이러한 state과 action을 묶기 위해서, reducer를 사용한다. 다만, reducer은 큰 규모로 다루는 것보다 <em>작은 규모로 나누어서 함수당 하나의 역할을 담당</em> 하도록 한다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// reducer 1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">visibilityFilter</span>(<span class="params">state = <span class="string">&#x27;SHOW_ALL&#x27;</span>, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (action.type === <span class="string">&#x27;SET_VISIBILITY_FILTER&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> action.filter</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> state</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// reducer 2</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">todos</span>(<span class="params">state = [], action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;ADD_TODO&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> state.concat([&#123; <span class="attr">text</span>: action.text, <span class="attr">completed</span>: <span class="literal">false</span> &#125;])</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;TOGGLE_TODO&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> state.map(<span class="function">(<span class="params">todo, index</span>) =&gt;</span></span><br><span class="line">        action.index === index</span><br><span class="line">          ? &#123; <span class="attr">text</span>: todo.text, <span class="attr">completed</span>: !todo.completed &#125;</span><br><span class="line">          : todo</span><br><span class="line">      )</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>최종적으로, 위와 같이 잘게 나눈 reducer를 통합하여 전체적인 reducer 기능을 하는 루트 reducer를 생성한다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">todoApp</span>(<span class="params">state = &#123;&#125;, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    todos: todos(state.todos, action),</span><br><span class="line">    visibilityFilter: visibilityFilter(state.visibilityFilter, action)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/05/27/THUREE-Redux/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/05/26/basic-Python/"
                            aria-label=": Python Overview"
                        >
                            Python Overview
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-05-26T02:16:12+09:00">
	
		    May 26, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Language/">Language</a>, <a class="category-link" href="/categories/Language/Python/">Python</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h1><p>매개변수(parameter)와 인수(arguments)는 혼용해서 사용되는 헷갈리는 용어이므로 잘 기억해 두자. 매개변수는 함수에 입력으로 전달된 값을 받는 변수를 의미하고 인수는 함수를 호출할 때 전달하는 입력값을 의미한다.</p>
<p><code>*args</code>처럼 매개변수 이름 앞에 <code>*</code>을 붙이면 입력값을 전부 모아서 튜플로 만들어 주기 때문이다.</p>
<p><code>**kwargs</code>처럼 매개변수 이름 앞에 <code>**</code>을 붙이면 매개변수 kwargs는 딕셔너리가 되고 모든 <code>key=value</code> 형태의 결괏값이 그 딕셔너리에 저장된다.</p>
<p>함수의 결괏값은 2개가 아니라 언제나 1개라는 데 있다. add_and_mul 함수의 결괏값 <code>a+b</code>와 <code>a*b</code>는 튜플값 하나인 <code>(a+b, a*b)</code>로 돌려준다.</p>
<p>함수는 return문을 만나는 순간 결괏값을 돌려준 다음 함수를 빠져나가게 된다.</p>
<p>문자열을 출력한다는 것과 반환 값이 있다는 것은 전혀 다른 말이다. 혼동하지 말자. 함수의 반환 값은 오로지 return문에 의해서만 생성된다.</p>
<p>함수의 매개변수에 들어갈 값이 항상 변하는 것이 아닐 경우에는 이렇게 함수의 초깃값을 미리 설정해 두면 유용하다.</p>
<p>하지만,</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SyntaxError: non-default argument follows default argument</span><br></pre></td></tr></table></figure>
<p>위 오류 메시지는 초깃값을 설정해 놓은 매개변수 뒤에 초깃값을 설정해 놓지 않은 매개변수는 사용할 수 없다는 뜻이다. 즉 매개변수로 <code>(name, old, man=True)</code>는 되지만 <code>(name, man=True, old)</code>는 안 된다는 것이다. 초기화시키고 싶은 매개변수를 항상 뒤쪽에 놓는 것을 잊지 말자.</p>
<p>함수 안에서 새로 만든 매개변수는 함수 안에서만 사용하는 “함수만의 변수”이기 때문이다.</p>
<p>즉 함수 안에서 사용하는 매개변수는 함수 밖의 변수 이름과는 전혀 상관이 없다는 뜻이다.</p>
<p>첫 번째 방법은 return을 사용하는 방법이다.</p>
<p>여기에서도 물론 vartest 함수 안의 a 매개변수는 함수 밖의 a와는 다른 것이다.</p>
<p>두 번째 방법은 global 명령어를 사용하는 방법이다. ( <code>global a</code> )</p>
<p>하지만 프로그래밍을 할 때 global 명령어는 사용하지 않는 것이 좋다. 왜냐하면 함수는 독립적으로 존재하는 것이 좋기 때문이다.</p>
<p>lambda는 함수를 생성할 때 사용하는 예약어로 def와 동일한 역할을 한다. 보통 함수를 한줄로 간결하게 만들 때 사용한다. 우리말로는 “람다”라고 읽고 def를 사용해야 할 정도로 복잡하지 않거나 def를 사용할 수 없는 곳에 주로 쓰인다.</p>
<blockquote>
<p>※ lambda 예약어로 만든 함수는 return 명령어가 없어도 결괏값을 돌려준다.</p>
</blockquote>
<p>input은 입력되는 모든 것을 문자열로 취급한다.</p>
<p>따옴표로 둘러싸인 문자열을 연속해서 쓰면 + 연산을 한 것과 같다.</p>
<p>콤마(,)를 사용하면 문자열 사이에 띄어쓰기를 할 수 있다.</p>
<p>print() 사용 시 한 줄에 결괏값을 계속 이어서 출력하려면 매개변수 end를 사용해 끝 문자를 지정해야 한다.</p>
<p>파일을 쓰기 모드로 열면 해당 파일이 이미 존재할 경우 원래 있던 내용이 모두 사라지고, 해당 파일이 존재하지 않으면 새로운 파일이 생성된다. </p>
<p>프로그램을 종료할 때 파이썬 프로그램이 열려 있는 파일의 객체를 자동으로 닫아주기 때문이다. 하지만 <code>close()</code>를 사용해서 열려 있는 파일을 직접 닫아 주는 것이 좋다. 쓰기모드로 열었던 파일을 닫지 않고 다시 사용하려고 하면 오류가 발생하기 때문이다.</p>
<p><code>readline()</code>을 사용해서 파일의 첫 번째 줄을 읽어 출력한다.</p>
<p><code>readline()</code>은 더 이상 읽을 줄이 없을 경우 빈 문자열(‘’)을 리턴한다.</p>
<p><code>readlines()</code>는 파일의 모든 줄을 읽어서 각각의 줄을 요소로 갖는 리스트로 돌려준다.</p>
<p><code>f.read()</code>는 파일의 내용 전체를 문자열로 돌려준다.</p>
<p>추가 모드로 파일을 열었기 때문에 새파일.txt 파일이 원래 가지고 있던 내용 바로 다음부터 결괏값을 적기 시작한다.</p>
<p>with문을 사용하면 with 블록을 벗어나는 순간 열린 파일 객체 f가 자동으로 close되어 편리하다.</p>
<p>인스턴스라는 말은 특정 객체(a)가 어떤 클래스(Cookie)의 객체인지를 관계 위주로 설명할 때 사용한다.</p>
<p>“a는 인스턴스”보다는 “a는 객체”라는 표현이 어울리며 “a는 Cookie의 객체”보다는 “a는 Cookie의 인스턴스”라는 표현이 훨씬 잘 어울린다.</p>
<p>클래스 안에 구현된 함수는 다른 말로 <strong>메서드</strong>(Method)라고 부른다.</p>
<p>일반 함수와는 달리 메서드의 첫 번째 매개변수 self는 특별한 의미를 가진다.</p>
<p>메서드의 첫 번째 매개변수 self에는 setdata메서드를 호출한 객체 a가 자동으로 전달된다.</p>
<p><img src="https://wikidocs.net/images/page/12392/setdata.png"></p>
<p>잘 사용하지는 않지만 다음과 같이 클래스를 통해 메서드를 호출하는 것도 가능하다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; a &#x3D; FourCal()</span><br><span class="line">&gt;&gt;&gt; FourCal.setdata(a, 4, 2)</span><br></pre></td></tr></table></figure>
<p>위와 같이 <code>클래스 이름.메서드</code> 형태로 호출할 때는 객체 a를 첫 번째 매개변수 self에 꼭 전달해 주어야 한다. 반면에 다음처럼 <code>객체.메서드</code> 형태로 호출할 때는 self를 반드시 생략해서 호출해야 한다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; a &#x3D; FourCal()</span><br><span class="line">&gt;&gt;&gt; a.setdata(4, 2)</span><br></pre></td></tr></table></figure>


<p>객체에 생성되는 객체만의 변수를 객체변수라고 부른다.</p>
<p>클래스로 만든 객체의 객체변수는 다른 객체의 객체변수에 상관없이 독립적인 값을 유지한다.</p>
<p>객체에 초깃값을 설정해야 할 필요가 있을 때는 setdata와 같은 메서드를 호출하여 초깃값을 설정하기보다는 생성자를 구현하는 것이 안전한 방법이다. 생성자(Constructor)란 객체가 생성될 때 자동으로 호출되는 메서드를 의미한다.</p>
<p>보통 상속은 기존 클래스를 변경하지 않고 기능을 추가하거나 기존 기능을 변경하려고 할 때 사용한다.</p>
<p>“클래스에 기능을 추가하고 싶으면 기존 클래스를 수정하면 되는데 왜 굳이 상속을 받아서 처리해야 하지?” 라는 의문이 들 수도 있다. 하지만 기존 클래스가 라이브러리 형태로 제공되거나 수정이 허용되지 않는 상황이라면 상속을 사용해야 한다.</p>
<p>클래스 변수는 위 예와 같이 <code>클래스이름.클래스 변수</code>로 사용할 수 있다.</p>
<p>또는 클래스로 만든 객체를 통해서도 클래스 변수를 사용할 수 있다.</p>
<p>클래스 변수는 클래스로 만든 모든 객체에 공유된다는 특징이 있다.</p>
<p>import는 현재 디렉터리에 있는 파일이나 파이썬 라이브러리가 저장된 디렉터리에 있는 모듈만 불러올 수 있다.</p>
<p>모듈 이름 없이 함수 이름만 쓰고 싶은 경우도 있을 것이다. 이럴 때는 “from 모듈 이름 import 모듈 함수”를 사용하면 된다.</p>
<p><code>if __name__ == &quot;__main__&quot;</code>을 사용하면 <code>C:\doit&gt;python mod1.py</code>처럼 직접 이 파일을 실행했을 때는 <code>__name__ == &quot;__main__&quot;</code>이 참이 되어 if문 다음 문장이 수행된다. 반대로 대화형 인터프리터나 다른 파일에서 이 모듈을 불러서 사용할 때는 <code>__name__ == &quot;__main__&quot;</code>이 거짓이 되어 if문 다음 문장이 수행되지 않는다.</p>
<p>파이썬의 <code>__name__</code> 변수는 파이썬이 내부적으로 사용하는 특별한 변수 이름이다. 만약 <code>C:\doit&gt;python mod1.py</code>처럼 직접 mod1.py 파일을 실행할 경우 mod1.py의 <code>__name__</code> 변수에는 <code>__main__</code> 값이 저장된다. 하지만 파이썬 셸이나 다른 파이썬 모듈에서 mod1을 import 할 경우에는 mod1.py의 <code>__name__</code> 변수에는 mod1.py의 모듈 이름 값 mod1이 저장된다.</p>
<p><code>sys.path</code>는 파이썬 라이브러리가 설치되어 있는 디렉터리를 보여 준다. 만약 파이썬 모듈이 위 디렉터리에 들어 있다면 모듈이 저장된 디렉터리로 이동할 필요 없이 바로 불러서 사용할 수 있다. 그렇다면 <code>sys.path</code>에 <code>C:\doit\mymod</code> 디렉터리를 추가하면 아무 곳에서나 불러 사용할 수 있다.</p>
<p>sys.path.append를 사용해서 <code>C:/doit/mymod</code>라는 디렉터리를 sys.path에 추가한다.</p>
<p>set 명령어를 사용해 <code>PYTHONPATH</code> 환경 변수에 mod2.py 파일이 있는 <code>C:\doit\mymod</code> 디렉터리를 설정한다. 그러면 디렉터리 이동이나 별도의 모듈 추가 작업 없이 mod2 모듈을 불러와서 사용할 수 있다.</p>
<p>파이썬 패키지는 디렉터리와 파이썬 모듈로 이루어진다.</p>
<p>패키지 === 폴더</p>
<p>모듈 === 파일</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/05/26/basic-Python/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/05/24/HandsonML-ch3/"
                            aria-label=": 3장: 분류"
                        >
                            3장: 분류
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-05-24T23:24:28+09:00">
	
		    May 24, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/ML/">ML</a>, <a class="category-link" href="/categories/ML/Hands-On/">Hands-On</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="3-1-MNIST"><a href="#3-1-MNIST" class="headerlink" title="3.1 MNIST"></a>3.1 MNIST</h2><p>sklearn.datasets : Toy datasets를 담은 lib (크기가 작아 학습용이 아닌 샘플용으로 사용)</p>
<p>일반적인 구조 ⇒ 쓸 수 있는 keys :</p>
<ul>
<li>데이터셋을 설명하는 DESCR 키</li>
<li>샘플이 하나의 행, 특성이 하나의 열로 구성된 배열을 가진 data 키</li>
<li>레이블 배열을 담은 target 키</li>
<li>등등</li>
</ul>
<br />



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.datasets </span><br><span class="line"><span class="keyword">import</span> fetch_openml </span><br><span class="line">mnist = fetch_openml(<span class="string">&#x27;mnist_784&#x27;</span>, version=<span class="number">1</span>) </span><br><span class="line">mnist.keys()  &gt;&gt;&gt; dict_keys([<span class="string">&#x27;data&#x27;</span>, <span class="string">&#x27;target&#x27;</span>, <span class="string">&#x27;feature_names&#x27;</span>, <span class="string">&#x27;DESCR&#x27;</span>, <span class="string">&#x27;details&#x27;</span>, <span class="string">&#x27;categories&#x27;</span>, <span class="string">&#x27;url&#x27;</span>])</span><br></pre></td></tr></table></figure>
<p>위의 결과는 mnist의 key들로, dictionary 구조를 가진 mnist에 대해 쓸 수 있는 명령들을 의미한다.</p>
<br />



<hr>
<ol>
<li>data : 학습용(feed) 데이터</li>
<li>target : label 데이터로, 분류될 class를 의미</li>
</ol>
<p>따라서,</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">X, y = mnist[<span class="string">&quot;data&quot;</span>], mnist[<span class="string">&quot;target&quot;</span>] </span><br><span class="line">X.shape &gt;&gt;&gt; (<span class="number">70000</span>, <span class="number">784</span>) <span class="comment"># 784 = 28*28 y.shape &gt;&gt;&gt; (70000,)</span></span><br></pre></td></tr></table></figure>
<p>X.shape는 70000개의 data에 대해 각 data 당 28*28에 해당하는 pixel 강도(0~255)을 담고 있는 배열을 나타내고,</p>
<p>y.shape는 70000개의 분류된 class를 나타낸다.</p>
<hr>
<p>mnist의 data를 담은 X 배열에서 하나의 이미지를 예시로 추출하여 출력해보도록 한다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">some_digit = X[<span class="number">0</span>] <span class="comment"># 0번째 data some_digit_image = some_digit.reshape(28, 28) # 28*28 size에 맞게 벡터 reshape</span></span><br></pre></td></tr></table></figure>
<p>some_digit.reshape(28, 28)이 의미하는 바는, 현재 [1, 784]로 저장되어 있는 X[0]의 이미지 벡터는 [28,28]의 배열로 reshaping한다는 것이다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">y[<span class="number">0</span>] &gt;&gt;&gt; <span class="string">&#x27;5&#x27;</span></span><br></pre></td></tr></table></figure>
<p>y에는 분류된 class가 담기므로, X[0]은 ‘5’ class에 속하는 data라는 것이다.</p>
<p>위에서 출력된 것은 ‘(작은따옴표)’로부터 알 수 있듯이 string data이므로 이를 정수로 바꾸는 코드가 다음과 같다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">y = y.astype(np.uint8)</span><br></pre></td></tr></table></figure>
<hr>
<br />



<p>1장에서 공부했듯이, 위의 MNIST은 지도 학습 모델이므로,</p>
<p>더 좋은 training result를 내기 위해서는 하나의 dataset에서 train dataset과 test dataset을 적절히 나누어야 한다. 따라서 해당 MNIST에서는 6:1로(전체 7만개의 dataset) train 및 test dataset을 나누었다.</p>
<p>또한 MNIST dataset은 데이터셋이 적절히 섞여 있어, 교차 검증 폴드(train / test set 간 분포의 균질성)가 비슷하고 훈련 샘플의 순서에 따른 성능 저하를 방지한다.</p>
<br />



<h2 id="3-2-이진-분류기-훈련"><a href="#3-2-이진-분류기-훈련" class="headerlink" title="3.2 이진 분류기 훈련"></a>3.2 이진 분류기 훈련</h2><p>이진 분류기 : YES or NO로 class 분류</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">y_train_5 = (y_train == <span class="number">5</span>)</span><br><span class="line">y_test_5 = (y_test == <span class="number">5</span>)</span><br></pre></td></tr></table></figure>
<p>위의 2가지 변수는 “감지기” 그 자체이다. 즉, 오른쪽 조건이 True인지 False인지 판단하는 감지기의 역할을 한다.</p>
<p>분류 모델로 사용할 SGD(Stochastic Gradient Descent) 분류기는 손실함수 자체를 최소화하는 것이 아닌, 손실함수의 기댓값을 최소화하는 방법을 이용한다. 즉, gradient가 아닌 gradient의 기댓값의 추정치를 이용한다. 이에 사용되는 수식은 다음과 같다. 𝑤(𝑘+1)=𝑤(𝑘)+E[∇𝐿]. 모든 학습 데이터를 사용하는 것이 아닌 minibatch(일부 데이터, 하나의 훈련 샘플 그룹)를 이용하여 gradient의 추정치를 구하므로, gradient의 기댓값의 추정치는 표본 평균으로 작용한다. 따라서 계산량과 학습 데이터가 많은 deep learning과 온라인 학습(미니배치 이용)에 적합하다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.linear_model </span><br><span class="line"><span class="keyword">import</span> SGDClassifier </span><br><span class="line">sgd_clf = SGDClassifier(random_state=<span class="number">42</span>) </span><br><span class="line">sgd_clf.fit(X_train, y_train_5) sgd_clf.predict([some_digit]) &gt;&gt;&gt; array([ <span class="literal">True</span>])</span><br></pre></td></tr></table></figure>
<p>SGDClassifier(random_state=42)에서 random_state은 무작위 값을 넣으며 최적값을 찾는 SGDClassifier의 특성에 따라, 이전에 실행했던 결과값을 repeatable하게 받기 위해 특정값을 저장하는 것을 의미한다. 값의 의미는 딱히 없으므로, 아무 정수로 설정할 수 있다. 이 후 classifier에 data와 y_train_5를 넣어 classifier을 fitting한다.</p>
<p>classifier은 predict의 결과로 some_digit(=X[0])을 넣었을 때 y_train_5에 따라 5 여부를 감지한 결과를 array에 담는다.</p>
<br />



<h2 id="3-3-성능-측정"><a href="#3-3-성능-측정" class="headerlink" title="3.3 성능 측정"></a>3.3 성능 측정</h2><h3 id="3-3-1-교차-검증을-사용한-정확도-측정"><a href="#3-3-1-교차-검증을-사용한-정확도-측정" class="headerlink" title="3.3.1 교차 검증을 사용한 정확도 측정"></a>3.3.1 교차 검증을 사용한 정확도 측정</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.model_selection </span><br><span class="line"><span class="keyword">import</span> StratifiedKFold </span><br><span class="line"><span class="keyword">from</span> sklearn.base </span><br><span class="line"><span class="keyword">import</span> clone skfolds = StratifiedKFold(n_splits=<span class="number">3</span>, random_state=<span class="number">42</span>) </span><br><span class="line"><span class="keyword">for</span> train_index, test_index <span class="keyword">in</span> skfolds.split(X_train, y_train_5) : </span><br><span class="line">	clone_clf = clone(sgd_clf) </span><br><span class="line">	X_train_folds = X_train[train_index] </span><br><span class="line">	y_train_folds = y_train_5[train_index] </span><br><span class="line">	X_test_fold = X_train[test_index] </span><br><span class="line">	y_test_fold = y_train[test_index] </span><br><span class="line">clone_clf.fit(X_train_folds, y_train_folds) </span><br><span class="line">y_pred = clone_clf.predict(X_test_fold) </span><br><span class="line">n_correct = <span class="built_in">sum</span>(y_pred == y_test_fold) </span><br><span class="line">print(n_correct / <span class="built_in">len</span>(y_pred)) &gt;&gt;&gt; <span class="number">0.9502</span>, <span class="number">0.96565</span>, <span class="number">0.96495</span></span><br></pre></td></tr></table></figure>
<p>StartifiedKFold에서 n_splits=3으로 설정하였으므로, 폴드가 3개인 k-겹 교차 검증이 수행된다.</p>
<p>train/test_index으로 skfolds 객체의 split()을 호출하여 학습용/검증용 데이터로 분할할 수 있는 인덱스를 반환받고 실제 분할된 데이터를 해당 index를 대입하여 추출한다. 이 때, split()의 대상은 X_train → y_train_5 집합이다. 이를 토대로 y 값의 prediction인 y_pred를 X_test_fold로부터 predict하고, 올바른 예측의 수를 y_pred와 y_test_fold를 비교하여 sum 값을 통해 계산한다.</p>
<p>위의 과정은 sklearn의 cross_val_score과 거의 같은 기능을 나타내므로 다음과 같은 코드로 정리할 수 있다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> cross_val_score </span><br><span class="line">cross_val_score(sgd_clf, X_train, y_train_5, cv=<span class="number">3</span>, scoring=<span class="string">&quot;accuracy&quot;</span>) &gt;&gt;&gt; array([<span class="number">0.96355</span>, <span class="number">0.93795</span>, <span class="number">0.95615</span>])</span><br></pre></td></tr></table></figure>
<p>이는 약 95%로 굉장히 높은 정확도를 나타낸다. 하지만, 이러한 정확도를 성능 측정 지표로 사용하지 않는 이유는 다음과 같다.</p>
<br />



<hr>
<p>위의 예시와 반대로, 5가 아닌 클래스를 분류하는 더미 분류기를 만들어 정확도를 비교해볼 수 있다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.base </span><br><span class="line"><span class="keyword">import</span> BaseEstimator </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Never5Classifier</span>(<span class="params">BaseEstimator</span>) :</span> </span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">fit</span>(<span class="params">self, X, y=<span class="literal">None</span></span>) :</span> </span><br><span class="line">		<span class="keyword">return</span> self </span><br><span class="line">		</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">predict</span>(<span class="params">self, X</span>) :</span> </span><br><span class="line">		<span class="keyword">return</span> np.zeros((<span class="built_in">len</span>(X), <span class="number">1</span>), dtype=<span class="built_in">bool</span>) </span><br><span class="line"></span><br><span class="line">never_5_clf = Never5Classifier() </span><br><span class="line">cross_val_score(never_5_clf, X_train, y_train_5, cv=<span class="number">3</span>, scoring=<span class="string">&quot;accuracy&quot;</span>) &gt;&gt;&gt; array([<span class="number">0.91125</span>, <span class="number">0.90855</span>, <span class="number">0.90915</span>])</span><br></pre></td></tr></table></figure>
<p>이 때 Never5Classifier의 predict 함수는 배열의 결과를 전부 False로 세팅하여 배열을 반환한다.</p>
<p>해당 classifier을 cross_val_score에 적용할 시 정확도가 90% 가량 나오는 것을 확인할 수 있다. 이는 약 10%의 이미지가 숫자 5이므로 이를 제외한 90%를 정확도로 출력한다. 따라서, 불균형한 데이터셋(5임/5가 아님 = 어떤 클래스가 다른 것보다 월등히 많음)을 다룰 때는 정확도를 분류기의 성능 측정 지표로 선호하지 않는다.</p>
<br />



<h3 id="3-3-2-오차-행렬"><a href="#3-3-2-오차-행렬" class="headerlink" title="3.3.2 오차 행렬"></a>3.3.2 오차 행렬</h3><p>오차 행렬 : 데이터와 다른 클래스로 잘못 분류한 횟수를 담은 행렬</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.model_selection </span><br><span class="line"><span class="keyword">import</span> cross_val_predict </span><br><span class="line">y_train_pred = cross_val_predict(sgd_clf, X_train, y_train_5, cv=<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p><code>cross_val_score()</code> : 테스트 세트의 output의 평균을 이용해 평가 점수 반환</p>
<p><code>cross_val_predict()</code> : 테스트 세트의 input의 각 element에 대한 깨끗한 예측 반환 (훈련하는 동안 사용되지 않은 데이터에 대해 예측)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">confusion_matrix(y_train_5, y_train_pred) &gt;&gt;&gt; array([[<span class="number">53057</span>, <span class="number">1522</span>], [<span class="number">1325</span>, <span class="number">4096</span>]])</span><br></pre></td></tr></table></figure>
<ul>
<li>행 : 실제 클래스 (데이터)</li>
<li>열 : 예측한 클래스</li>
</ul>
<p>따라서, 위의 결과에서 첫 번째 행이 “5 아님”(음성 클래스)일 때, 첫 번째 열은 True Negative(예측 N, 실제 N)을 나타내며, 두 번째 열은 False Positive(예측 P, 실제 N)를 나타낸다. 두 번째 행은 “5임”(양성 클래스)이며, 첫 번째 열은 FN(예측 N, 실제 P), 두 번째 열은 TP(예측 P, 실제 P)이다.</p>
<hr>
<p>이에 완벽한 분류기는 TP와 TN만 가지고 있을 것이므로, 실제 confusion matrix의 출력값은 주대각선 값만 존재한다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">y_train_perfect_predictions = y_train_5 confusion_matrix(y_train_5, y_train_perfect_predictions) &gt;&gt;&gt; array([[<span class="number">54579</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">5421</span>]])</span><br></pre></td></tr></table></figure>
<br />



<h3 id="3-3-3-정밀도와-재현율"><a href="#3-3-3-정밀도와-재현율" class="headerlink" title="3.3.3 정밀도와 재현율"></a>3.3.3 정밀도와 재현율</h3><ul>
<li>정밀도 = 정확도 = TP / (TP+FP)</li>
<li>재현율 = 민감도 = TP / (TP+FN)</li>
</ul>
<p>정밀도는 예측이 양성인 결과(TP, FP)를, 재현율은 실제 양성인 결과(TP,FN)를 이용한다.</p>
<p>즉, 정밀도는 확실한 양성 샘플 하나만 예측할 시 1이 나오지만 이는 다른 모든 양성 샘플을 무시한 결과이므로, 재현율(민감도 또는 진짜 양성 비율)과 같은 다른 지표와 함께 사용해야 한다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">precision_score(y_train_5, y_train_pred) // 정밀도 &gt;&gt;&gt; <span class="number">0.729085</span>... </span><br><span class="line">recall_score(y_train_5, y_train_pred) // 재현율 &gt;&gt;&gt; <span class="number">0.755580</span>...</span><br></pre></td></tr></table></figure>
<p>0.729는 정밀도로, 5로 판별된 이미지 중 72.9%가 정확하다는 의미이며, 0.756은 재현율으로, 전체 숫자 5에서 75.6%의 5만 감지한 것을 의미한다.</p>
<br />

<hr>
<p>이를 하나의 숫자로 통합해 살펴볼 수 있는 평가 지표가 F1 점수, 즉 정밀도와 재현율의 조화 평균이다.</p>
<ul>
<li>F1 = TP / (TP + (FN + FP) / 2)</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f1_score(y_train_5, y_train_pred) &gt;&gt;&gt; <span class="number">0.742096</span>...</span><br></pre></td></tr></table></figure>
<p>정밀도와 재현율이 비슷할 시 F1의 값이 높게 나오므로 간단한 평가 지표로 이용할 수 있지만,</p>
<p>정밀도/재현율 트레이드오프에 따라 정밀도와 재현율이 반비례하는 경우 상황에 따라 둘의 중요성이 달라지므로 F1을 주요 평가 지표로 사용하는 것이 바람직하지 않다.</p>
<br />



<h3 id="3-3-4-정밀도-재현율-트레이드오프"><a href="#3-3-4-정밀도-재현율-트레이드오프" class="headerlink" title="3.3.4 정밀도/재현율 트레이드오프"></a>3.3.4 정밀도/재현율 트레이드오프</h3><p>정밀도와 재현율은 결정 함수의 결과로 나온 output dataset에 적용하는 임곗값에 따라 달라진다.</p>
<p>즉, 임곗값을 높게 설정할 경우 정밀도는 높아지나 포함되는 TP가 낮아지므로 재현율은 떨어지며, 임곗값을 낮게 설정할 경우 정밀도는 떨어지나 재현율은 높아진다. some_digit의 예측에 사용한 점수를 확인하고 임곗값을 정해 양성/음성 예측을 만들기 위해 decision_function()을 이용한다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">y_scores = sgd_clf.decision_function([some_digit]) </span><br><span class="line">y_scores &gt;&gt;&gt; array([<span class="number">2412.53175101</span>]) </span><br><span class="line">threshold = <span class="number">0</span> </span><br><span class="line">y_some_digit_pred = (y_scores &gt; threshold) &gt;&gt;&gt; array([ <span class="literal">True</span>]) </span><br><span class="line">threshold = <span class="number">8000</span> </span><br><span class="line">y_some_digit_pred = (y_scores &gt; threshold) y_some_digit_[red &gt;&gt;&gt; array([<span class="literal">False</span>])</span><br></pre></td></tr></table></figure>
<p>따라서 적절한 임곗값을 설정하기 위하여, cross_val_predict()의 decision_function을 이용하여 모든 샘플의 결정 점수를 얻는다. 이후 precision_recall_curve()를 이용해 가능한 임곗값에 대한 정밀도와 재현율을 얻는다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">y_scores = cross_val_predict(sgd_clf, X_train, y_train_5, cv=<span class="number">3</span>, method=<span class="string">&quot;decision_function&quot;</span>) </span><br><span class="line">precisions, recalls, thresholds = precision_recall_curve(y_train_5, y_scores)</span><br></pre></td></tr></table></figure>
<p>좋은 정밀도/재현율 트레이드오프는 재현율에 대한 정밀도 곡선에서 정밀도가 급격하게 줄어드는 지점 직전의 값으로 임곗값을 설정하면 된다.</p>
<p>또한 특정한 목표치의 정밀도를 달성하는 것이 목표(n%라고 가정해보자.)일 때는, 다음과 같이 임곗값을 설정하면 된다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">threshold_90_precision = thresholds[np.argmax(precisions &gt;= n / <span class="number">100</span>)] </span><br><span class="line">y_train_pred_90 = (y_scores &gt;= threshold_90_precision) </span><br><span class="line">precision_score(y_train_5, y_train_pred_90) &gt;&gt;&gt; <span class="number">0.900038</span>... </span><br><span class="line">recall_score(y_train_5, y_train_pred_90) &gt;&gt;&gt; <span class="number">0.436819</span>...</span><br></pre></td></tr></table></figure>
<p>하지만 재현율이 너무 낮을 경우, 높은 정밀도의 분류기는 유용하지 않다.</p>
<br />



<h3 id="3-3-5-ROC-곡선"><a href="#3-3-5-ROC-곡선" class="headerlink" title="3.3.5 ROC 곡선"></a>3.3.5 ROC 곡선</h3><p>ROC 곡선 : 거짓 양성 비율(FPR)에 대한 진짜 양성 비율(TPR, 재현율)의 곡선으로, FPR = 1(실제 음성) - TNR이다. 이 때 TNR을 특이도라고 하며, ROC를 재현율에 대한 1-특이도라고 한다.</p>
<p>TPR과 FPR을 계산하기 위해 사용되는 함수는 roc_curve()로, 다음과 같이 사용된다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fpr, tpr, thresholds = roc_curve(y_train_5, y_scores)</span><br></pre></td></tr></table></figure>
<p>TPR이 높아질 수록 FPR도 높아지므로, 좋은 분류기는 완전한 랜덤 분류기(TPR : FPR = 1 : 1)에서 최대한 왼쪽 위 모서리(TPR은 높고 FPR은 낮은)로 멀리 떨어져야 한다. 이를 평가하는 지표로는 곡선 아래의 면적(AUC)가 있는데, AUC를 계산하기 위해 RandomForestClassifier을 이용한다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.ensemble <span class="keyword">import</span> RandomForestClassifier </span><br><span class="line">forest_clf = RandomForestClassifier(random_state = <span class="number">42</span>) </span><br><span class="line">y_probas_forest = cross_val_predict(forest_clf, X_train, y_train_5, cv=<span class="number">3</span>, method=<span class="string">&quot;predict_proba&quot;</span>) </span><br><span class="line">y_scores_forest = y_probas_forest[:, <span class="number">1</span>] </span><br><span class="line">roc_auc_score(y_train_5, y_scores_forest)</span><br></pre></td></tr></table></figure>
<p>RandomForestClassifier에서는 decision_function 대신 predict_proba 기능을 제공한다.</p>
<p>그 결과로서, RandomForestClassifier는 SGDClassifier보다 왼쪽 위 모서리에 더 가까운 ROC 곡선을 생성하므로 AUC 점수로 더 높다.</p>
<br />



<h2 id="3-4-다중-분류"><a href="#3-4-다중-분류" class="headerlink" title="3.4 다중 분류"></a>3.4 다중 분류</h2><p>다중 분류기로 둘 이상의 클래스를 구별할 수 있으나, 보통 이진 분류기를 이용해 다음과 같은 2가지의 방법으로 다중 클래스를 구별한다. 보통 다중 클래스 분류 작업에 이진 분류 알고리즘을 선택하면 자동적으로 OvR이나 OvO를 실행하지만, import를 통해 클래스 객체를 생성하여 강제적으로 원하는 Classifier을 설정할 수도 있다.</p>
<ul>
<li>OvR(OvA) : 특정 클래스만 구분하는 클래스별 이진 분류기 n개를 훈련시켜 클래스가 n개의 클래스 분류 시스템을 만든다. 이후 각 분류기의 결정 점수 중에서 가장 높은 것을 클래스로 선택한다. 이는 큰 훈련 세트에서 적은 분류기를 훈련시킨다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.multiclass <span class="keyword">import</span> OneVsRestClassifier</span><br></pre></td></tr></table></figure>
<ul>
<li>OvO : 각 클래스의 조합마다 이진 분류기를 훈련시킨다. 이 중 가장 많이 양성으로 분류된 클래스를 선택한다. 이는 각 분류기의 훈련에 전체 훈련 세트 중 구별할 두 클래스의 샘플만 필요하므로, 작은 훈련 세트에서 많은 분류기를 훈련시킬 수 있다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.multiclass <span class="keyword">import</span> OneVsOneClassifier</span><br></pre></td></tr></table></figure>
<p>더 높은 정확도를 위해, 입력의 스케일을 조정하면 분류기의 성능을 높일 수 있다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandartScaler </span><br><span class="line">scaler = StandardScaler() </span><br><span class="line">X_train_scaled = scaler.fit_transform(X_train.astype(float64))</span><br></pre></td></tr></table></figure>
<br />



<h2 id="3-5-에러-분석"><a href="#3-5-에러-분석" class="headerlink" title="3.5 에러 분석"></a>3.5 에러 분석</h2><p>cross_val_predict()를 이용해 결과값을 예측하고, 이 후 confusion_matrix()를 이용해 오차 행렬을 생성한다. 그 후 matshow()를 실행 시, 각 클래스 별로 예측한 클래스의 확률이 밝기로 나타나는데, 밝을 수록 높은 확률을 나타낸다. 따라서 올바른 오차 행렬은 주대각선의 밝기가 밝고, 나머지는 어두워야 한다.</p>
<p>이러한 오차 행렬의 특성에 따라 잘못 분류된 클래스를 파악하고 분류기의 성능 향상 방안에 대해 생각해볼 수 있다. 특히 이 과정에서 데이터의 전처리가 중요한데, 3과 5의 클래스를 분류하는 예시의 경우 SGDClassifier을 적용할 경우 미세한 픽셀 강도의 차이가 클래스 분류의 오류로 이어지므로 이미지의 회전값을 0으로 조정하는 것이 이에 해당한다.</p>
<br />



<h2 id="3-6-다중-레이블-분류"><a href="#3-6-다중-레이블-분류" class="headerlink" title="3.6 다중 레이블 분류"></a>3.6 다중 레이블 분류</h2><p>다중 레이블 분류 시스템 : 하나의 샘플에 여러 개의 클래스가 포함될 경우, 레이블을 달아 각 클래스를 구별하는 시스템</p>
<p>다중 레이블 분류 시 적절한 지표를 사용하는 것이 중요한데, 다음과 같이 F1 점수에 다른 가중치 기준을 적용하여 분류기를 평가할 수 있다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">y_train_knn_pred = cross_val_predict(knn_clf, X_train, y_multilabel, cv=<span class="number">3</span>) </span><br><span class="line">f1_score(y_multilabel, y_train_knn_pred, average = <span class="string">&quot;macro&quot;</span>) <span class="comment"># 모든 레이블의 가중치가 같음 </span></span><br><span class="line">f1_score(y_multilabel, y_train_knn_pred, average = <span class="string">&quot;weighted&quot;</span>) <span class="comment"># 타깃 레이블에 속한 샘플 수(지지도)에 가중치를 둠</span></span><br></pre></td></tr></table></figure>
<br />



<h2 id="3-7-다중-출력-분류"><a href="#3-7-다중-출력-분류" class="headerlink" title="3.7 다중 출력 분류"></a>3.7 다중 출력 분류</h2><p>다중 출력 분류(다중 출력 다중 클래스 분류) 시스템 : 다중 레이블 분류에서 각 레이블이 다중 클래스가 될 수 있도록 일반화한 시스템</p>
<p>이를 잡음이 포함된 이미지를 예시로 설명해보자면, 잡음이 포함된 이미지의 각 픽셀은 하나의 레이블에 해당되며 모든 픽셀은 0~255의 다양한 값을 가질 수 있다. 해당 이미지에서 잡음을 제거 시 각 픽셀의 값은 변화하므로 다중 클래스가 될 수 있다. 따라서 이는 다중 레이블에 다중 클래스가 합쳐진 다중 출력 다중 클래스 분류이다.</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/05/24/HandsonML-ch3/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/05/22/Data2Vis-code-review/"
                            aria-label=": Data2Vis 코드 리뷰"
                        >
                            Data2Vis 코드 리뷰
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-05-22T07:49:38+09:00">
	
		    May 22, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Graduation-Project/">Graduation Project</a>, <a class="category-link" href="/categories/Graduation-Project/Paper-Review/">Paper Review</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    
                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/05/22/Data2Vis-code-review/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/05/21/Data2Vis-paper-review/"
                            aria-label=": Data2Vis: Automatic Generation of Data Visualizations Using Sequence to Sequence Recurrent Neural Networks 논문 리뷰"
                        >
                            Data2Vis: Automatic Generation of Data Visualizations Using Sequence to Sequence Recurrent Neural Networks 논문 리뷰
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-05-21T00:12:36+09:00">
	
		    May 21, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Graduation-Project/">Graduation Project</a>, <a class="category-link" href="/categories/Graduation-Project/Paper-Review/">Paper Review</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h2><p><strong>creating effective visualizations using <em>expressive grammars</em></strong></p>
<br />



<img width="452" align="center" alt="Screenshot 2021-05-20 at 17 05 21" src="https://user-images.githubusercontent.com/49134038/119007780-8160be00-b9cc-11eb-8994-a13466e5a568.png">

<br />



<h4 id="End-to-End-Trainable-Neural-Translation-Model"><a href="#End-to-End-Trainable-Neural-Translation-Model" class="headerlink" title="End-to-End Trainable Neural Translation Model"></a>End-to-End Trainable Neural Translation Model</h4><ul>
<li><p>visualization generation === language translation problem</p>
<p><code>formulation</code></p>
<blockquote>
<p>Vega-Lite</p>
</blockquote>
<ul>
<li>mapping : data specifications → visualization specifications</li>
<li>in a declarative language</li>
</ul>
<p><code>training</code></p>
<ul>
<li><p>a <em>multilayered, attention-based</em> <code>encoder-decoder</code> network</p>
</li>
<li><p>with <em>long short-term memory units</em> ( <code>LSTM</code> )</p>
<blockquote>
<p><img src="https://developer.nvidia.com/sites/default/files/pictures/2018/lstm.png" alt="LSTM"></p>
</blockquote>
</li>
<li><p>on a corpus of visualization specifications</p>
</li>
</ul>
</li>
</ul>
<br />



<h4 id="learns…"><a href="#learns…" class="headerlink" title="learns…"></a>learns…</h4><ul>
<li>the <code>vocabulary</code> and <code>syntax</code> for a valid visualization specification</li>
<li>appropriate <code>transformations</code><ul>
<li><em>e.g.</em> count, bins, mean</li>
</ul>
</li>
<li>how to use common <code>data selection patterns</code> that occur within data visualizations</li>
</ul>
<br />



<h2 id="Problem-Formulation"><a href="#Problem-Formulation" class="headerlink" title="Problem Formulation"></a>Problem Formulation</h2><blockquote>
<p> <em>applies deep learning for <strong>translation and synthesis</strong></em></p>
</blockquote>
<br />



<ol>
<li><p><strong>data visualization problem === sequence to sequence models</strong> ( <code>seq2seq</code> )</p>
<ul>
<li><code>input</code> sequence : dataset<ul>
<li><em>e.g.</em> fields, values in <em>json format</em></li>
</ul>
</li>
<li><code>output</code> sequence : valid <code>Vega-Lite</code> visualization specification</li>
</ul>
</li>
<li><p><strong>sequence translation === encoder-decoder networks</strong></p>
<ul>
<li><code>encoder</code> : reads and encodes a source sequence into <code>a fixed length vector</code></li>
<li><code>decoder</code> : outputs a <code>translation</code> based on this vector</li>
</ul>
<p>👉 jointly trained to <strong>maximize the probability of outputting a correct</strong> translation</p>
</li>
</ol>
<blockquote>
<p><code>seq2seq</code></p>
<ol>
<li><p>generates data that is <em>sequential or temporally dependent</em></p>
<ul>
<li><em>e.g.</em> language translation</li>
</ul>
</li>
<li><p>finds applications for problems where the output or input is <em>non-sequential</em></p>
<ul>
<li><em>e.g.</em> text summarization, image captioning</li>
</ul>
<p>👉 <strong>bidirectional RNN units</strong></p>
<p>👉 <strong>attention mechanisms</strong></p>
</li>
</ol>
</blockquote>
<br />



<h4 id="Details"><a href="#Details" class="headerlink" title="Details"></a>Details</h4><blockquote>
<p><strong><em>ordinary</em> RNN ( <code>unidirectional</code> )</strong></p>
<ol>
<li><p>reads an input sequence x from the first token x_1 to the last x_m</p>
</li>
<li><p>generates an encoding only based on the preceding tokens it has seen</p>
</li>
</ol>
<br />



<p><strong><em>Bidirectional</em> RNN ( <code>BiRNN</code> )</strong></p>
<ul>
<li><p>consists of a forward RNN + a backward RNN</p>
</li>
<li><p>enables an encoding generation based on both the preceding and following tokens</p>
</li>
</ul>
<ol>
<li><p>a forward RNN ( <code>→f</code> )</p>
<ol>
<li>reads the input sequence as it is ordered from x_1 to x_m</li>
<li>calculates a sequence of forward hidden states (→h_1, …, →h_m)</li>
</ol>
</li>
<li><p>a backward RNN ( <code>←f</code> )</p>
<ol>
<li>reads the sequence in the reverse order from x_m to x_1</li>
<li>calculates a sequence of backward hidden states (←h_1, …, ←h_m)</li>
</ol>
</li>
<li><p>generates a hidden state <code>→h_j</code></p>
<p><code>→h_j</code> </p>
<ul>
<li>a <u>concatenation</u> of both the forward and backward RNNs <u>( <code>h_j</code> : <code>[→h_j(T); ←h_j(T)]T</code> )</u></li>
<li>contains summaries of both the preceeding and following tokens</li>
</ul>
</li>
</ol>
</blockquote>
<blockquote>
<p><strong>attention mechanism</strong></p>
<ul>
<li>focuses on aspects of an input sequence</li>
<li>generates output tokens</li>
<li>makes translation models <strong>robust</strong> to performance degradation</li>
<li>generates <strong>lengthy</strong> sequences</li>
<li>enables model to <strong>learn mappings</strong> between source and target sequences of <strong>different lengths</strong></li>
<li>improves the ability to <strong>interpret and debug</strong> sequence to sequence models as providing valuable insights on <em>why a given token is generated at each step</em></li>
</ul>
<hr>
<ul>
<li><p><em>e.g.</em></p>
<p><code>image captioning</code></p>
<ul>
<li>model <em>focuses on <strong>specific parts</strong> of objects</em> in an image</li>
<li><em>generates <strong>each word or token</strong></em> in the image caption</li>
</ul>
</li>
</ul>
</blockquote>
<br />



<p>👇 <em>enables us to use a <strong>sequence translation model</strong> which…</em> </p>
<ol>
<li>first takes into consideration the entire data input (dataset)</li>
<li>and then focuses on aspects of the input (fields) in generating a visualization specification</li>
</ol>
<br />



<h2 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h2><h4 id="Encoder-Decoder-Architecture-with-Attention-mechanism"><a href="#Encoder-Decoder-Architecture-with-Attention-mechanism" class="headerlink" title="Encoder-Decoder Architecture with Attention mechanism"></a>Encoder-Decoder Architecture with Attention mechanism</h4><ol>
<li><p>2-layer <code>Encoder</code> </p>
<ul>
<li>bidirectional recurrent neural network (RNN)<ul>
<li>takes in an input <strong>sequence</strong> of <em>source tokens x</em></li>
<li>and outputs a <strong>sequence</strong> of <em>states h</em></li>
</ul>
</li>
</ul>
</li>
<li><p>2-layer <code>Decoder</code> </p>
<ul>
<li><p>RNN</p>
<ul>
<li>computes the <strong>probability</strong> of a <em>target sequence y</em> <u>based on the hidden state h</u></li>
</ul>
<blockquote>
<p><code>probability</code></p>
<ul>
<li>generated <em>based on the <strong>recurrent state of the decoder</strong> RNN</em>, <strong>previous tokens</strong> in the target sequence and a <strong>context vector <code>c_i</code></strong> </li>
</ul>
<p><code>context vector</code> === <code>attention vector</code></p>
<ul>
<li><em><strong>a weighted average</strong> of the source states</em></li>
<li>and designed to capture the context of source sequence that help <strong>predict</strong> the current target token</li>
</ul>
</blockquote>
</li>
</ul>
</li>
<li><p><em>each with</em> 512 <code>Long Short-Term Memory</code> (LSTM) units (cells)</p>
<ul>
<li>better than Gated Recurrent Unit (GRU)</li>
</ul>
</li>
</ol>
<br />



<h2 id="Data-and-Preprocessing"><a href="#Data-and-Preprocessing" class="headerlink" title="Data and Preprocessing"></a>Data and Preprocessing</h2><h4 id="Learning-Objectives"><a href="#Learning-Objectives" class="headerlink" title="Learning Objectives"></a>Learning Objectives</h4><p><em>model should…</em></p>
<ol>
<li><p>select a subset of fields to focus on, when creating visualizations</p>
<ul>
<li>most datasets have multiple fields which cannot all be simultaneously visualized</li>
</ul>
</li>
<li><p>learn differences in data types across the data fields</p>
<ul>
<li><em>e.g.</em> numeric, string, temporal, ordinal, categorical, etc.</li>
</ul>
</li>
<li><p>learn the appropriate transformations to apply to a field given its data type</p>
<ul>
<li><em>e.g.</em> aggregate transform does not apply to string fields</li>
</ul>
<p>👇</p>
<p><code>Vega-Lite Grammer</code></p>
</li>
</ol>
<ul>
<li>view-level transforms (aggregate, bin, calculate, filter, timeUnit)<ul>
<li>field-level transforms (aggregate, bin, sort, timeUnit)</li>
</ul>
</li>
</ul>
<br />



<h4 id="Achieving-Objectives"><a href="#Achieving-Objectives" class="headerlink" title="Achieving Objectives"></a>Achieving Objectives</h4><p><em><strong>character based sequence model</strong></em></p>
<ul>
<li><p><strong>Challenge</strong> : a <em>character tokenization strategy</em> requires</p>
<ul>
<li><strong>more units</strong> to represent a sequence</li>
<li>a large amount of <strong>hidden layers</strong></li>
<li>a large amount of <strong>parameters</strong> <em>to model long term dependencies</em></li>
</ul>
</li>
<li><p>Solution</p>
<ol>
<li><p>replace string and numeric field names using a <strong>short notation</strong></p>
<ul>
<li>e.g.* “str”, “num” in the source sequence (dataset)</li>
</ul>
</li>
<li><p>a <strong>similar backward transformation</strong> is done in the target sequence</p>
<ul>
<li>to maintain consistency in field names</li>
</ul>
</li>
</ol>
<p>👇</p>
<ul>
<li>scaffolds the learning process by reducing the vocabulary size</li>
<li>prevents the LSTM from learning field names (which are not needed to be memorized)</li>
</ul>
</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/05/21/Data2Vis-paper-review/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/05/19/VizML-paper-review/"
                            aria-label=": VizML: A Machine Learning Approach to Visualization Recommendation 논문 리뷰"
                        >
                            VizML: A Machine Learning Approach to Visualization Recommendation 논문 리뷰
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-05-19T07:19:37+09:00">
	
		    May 19, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Graduation-Project/">Graduation Project</a>, <a class="category-link" href="/categories/Graduation-Project/Paper-Review/">Paper Review</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <blockquote>
<h3 id="Visualization-Recommender-System"><a href="#Visualization-Recommender-System" class="headerlink" title="Visualization Recommender System"></a>Visualization Recommender System</h3><p>lower the barrier to exploring basic visualizations</p>
<ul>
<li>by <em>automatically generating results</em></li>
<li>for analysts to <em>search and select</em>, not manually specify</li>
</ul>
</blockquote>
<br />



<h2 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h2><br />



<img width="586" aligned="center" alt="Screenshot 2021-05-19 at 14 20 00" src="https://user-images.githubusercontent.com/49134038/118769577-4884f400-b8bb-11eb-98b6-7314c700938f.png">

<br />



<h4 id="machine-learning-based-approach"><a href="#machine-learning-based-approach" class="headerlink" title="machine learning-based approach"></a>machine learning-based approach</h4><ul>
<li><strong>learns</strong> visualization <code>design choices</code> </li>
<li><em>from</em> a large corpus of <code>datasets</code> </li>
<li><em>from</em> associated <code>visualisations</code> </li>
</ul>
<br />



<h4 id="by…"><a href="#by…" class="headerlink" title="by…"></a>by…</h4><ol>
<li>identify <strong>five key design choices</strong></li>
<li>using one million dataset-visualisation pairs</li>
</ol>
<br />



<h4 id="evaluation"><a href="#evaluation" class="headerlink" title="evaluation"></a>evaluation</h4><p><strong>for</strong> : generalizability and uncertainty</p>
<p><strong>by</strong> : benchmark with a crowdsourced test set</p>
<p><strong>result</strong> : comparable to human performance</p>
<br />



<h2 id="Problem-Formulation"><a href="#Problem-Formulation" class="headerlink" title="Problem Formulation"></a>Problem Formulation</h2><p><strong>Data visualization communicates information <em>by representing data with visual elements</em></strong></p>
<br />



<p><code>representations</code> are specified <em>using…</em></p>
<ul>
<li><p><code>encodings</code> : map from data to the <code>retinal properties</code> of <code>graphical marks</code></p>
</li>
<li><p><code>retinal properties</code></p>
<ul>
<li><em>e.g.</em> position, length, colour</li>
</ul>
</li>
<li><p><code>graphical marks</code></p>
<ul>
<li><em>e.g.</em> point, line, rectangle</li>
</ul>
</li>
</ul>
<br />



<p><em>e.g.</em></p>
<img width="368" aligned="center" alt="Screenshot 2021-05-19 at 15 04 20" src="https://user-images.githubusercontent.com/49134038/118769573-47ec5d80-b8bb-11eb-918f-c34c5a51f0e2.png">

<p>To create <strong>scatterplot</strong> showing the relationship between <em>MPG</em> and <em>Hp</em>,</p>
<ul>
<li><p><strong>encoding each pair</strong> of data points of a circle on a 2D plane</p>
</li>
<li><p>while <strong>specifying other retinal properties</strong> such as size and colour</p>
</li>
</ul>
<br />



<h5 id="Method"><a href="#Method" class="headerlink" title="Method"></a>Method</h5><p><code>Vega-lite</code></p>
<ul>
<li>selecting  <code>mark type</code> and <code>fields</code> to be <em>encoded along the x- and y-axes</em></li>
</ul>
<p><code>Tableau</code></p>
<ul>
<li><em>placing the 2 columns</em> onto the respective column and row shelves</li>
</ul>
<br />



<hr>
<br />



<ol>
<li><p><strong>formulate</strong> basic visualization of a <em>dataset</em> <code>d</code> <strong>as</strong> a <em>set of interrelated design choices</em> <code>C = &#123;c&#125;</code></p>
<blockquote>
<p> <code>set of choices</code> that result in valid visualizations</p>
<p>=== a <code>subset</code> of the space of <strong>all possible choices</strong></p>
</blockquote>
</li>
<li><p><strong>automatically suggest</strong> a <em>subset of design choices</em> <code>C_rec ⊆ C</code> that <em>maximize effectiveness</em></p>
<blockquote>
<p> <code>effectiveness</code> can be defined by informational measures</p>
<ul>
<li><em>e.g.</em> efficiency, accuracy, memorability, emotive measures</li>
</ul>
</blockquote>
</li>
</ol>
<br />



<h2 id="Related-Work"><a href="#Related-Work" class="headerlink" title="Related Work"></a>Related Work</h2><h4 id="Rule-based-Visualization-Recommender-Systems"><a href="#Rule-based-Visualization-Recommender-Systems" class="headerlink" title="Rule-based Visualization Recommender Systems"></a>Rule-based Visualization Recommender Systems</h4><br />



<h4 id="ML-based-Visualization-Recommender-Systems"><a href="#ML-based-Visualization-Recommender-Systems" class="headerlink" title="ML-based Visualization Recommender Systems"></a>ML-based Visualization Recommender Systems</h4><blockquote>
<h5 id="DeepEye"><a href="#DeepEye" class="headerlink" title="DeepEye"></a>DeepEye</h5><h5 id="Data2Vis"><a href="#Data2Vis" class="headerlink" title="Data2Vis"></a>Data2Vis</h5><h5 id="Draco-Learn"><a href="#Draco-Learn" class="headerlink" title="Draco-Learn"></a>Draco-Learn</h5></blockquote>
<h5 id="VizML"><a href="#VizML" class="headerlink" title="VizML"></a>VizML</h5><ul>
<li><p><em>Pros</em></p>
<ul>
<li><p><code>learning task</code> : <em>learn to…</em></p>
<p><strong>predict design choices</strong></p>
<ul>
<li>easier to <strong>quantitatively</strong> validate</li>
<li>easier to provide <strong>interpretable measures</strong> of feature importance</li>
<li>easily <strong>integrated</strong> into visualization systems</li>
</ul>
<blockquote>
<p>DeepEye : classify and rank visualizations</p>
<p>Data2Vis : end-to-end generation model</p>
<p>Draco-Learn : soft constraints weights</p>
</blockquote>
</li>
<li><p><code>data quantity</code> : <em>training corpus is…</em></p>
<p><strong>orders of magnitude larger</strong> than DeepEye and Data2Vis</p>
<ul>
<li>permits the use of <strong>large feature sets</strong> that <em>capture many aspects</em> of a dataset</li>
<li>permits the use of <strong>high-capacity models</strong> such as deep neural network</li>
</ul>
</li>
<li><p><code>data quality</code> : the datasets used are…</p>
<p><strong>extremely diverse</strong> in shape, structure, and distribution</p>
<p>the result of <strong>real visual analysis by analysts</strong> on their own datasets</p>
<blockquote>
<p>others</p>
<ul>
<li>few datasets used to train</li>
<li>visualisations are generated by rule-based systems</li>
<li>evaluated number controlled settings</li>
</ul>
</blockquote>
</li>
</ul>
</li>
</ul>
<br />



<ul>
<li><em>cons</em><ul>
<li>only recommends <strong>visual encodings, not data queries</strong></li>
<li>do not create ★ an <strong>application</strong> that employs the visualization model ★</li>
</ul>
</li>
</ul>
<br />



<h2 id="Data"><a href="#Data" class="headerlink" title="Data"></a>Data</h2><h3 id="Feature-Extraction"><a href="#Feature-Extraction" class="headerlink" title="Feature Extraction"></a>Feature Extraction</h3><p><em>distinguish the feature categories to…</em></p>
<ol>
<li>organize <strong>how to</strong> create and interpret features</li>
<li>observe the <strong>contribution</strong> of different types of features</li>
<li>to capture if <strong>less generalizable</strong> than other categories</li>
</ol>
<br />



<img width="320" aligned="center" alt="Screenshot 2021-05-19 at 15 26 21" src="https://user-images.githubusercontent.com/49134038/118769569-46bb3080-b8bb-11eb-8a7e-548703c05715.png">

<ul>
<li><code>Dimensions D</code> : <em>the number of rows</em> in a column</li>
<li><code>Types T</code> : whether a column is <em>categorical, temporal, or quantitative</em></li>
<li><code>Values V</code> : <em>the statistical and structural properties</em> of the values within a column</li>
<li><code>Names N</code> : the <em>column name</em></li>
</ul>
<p>👉 <strong>order in <code>D - T - V - N</code></strong>  by <em>how biased</em> the features to be towards the corpus </p>
<br />



<h5 id="Method-1"><a href="#Method-1" class="headerlink" title="Method"></a>Method</h5><ol>
<li><p>describe each pair of columns with <code>30 pairwise-column features</code></p>
</li>
<li><p>divide into 2 categories : <code>Values</code> and <code>Names</code> </p>
<blockquote>
<p>many pairwise-column features depend on the individual column types</p>
</blockquote>
</li>
<li><p>create <code>841dataset-level features</code> by aggregating single- and pairwise-column features using <code>16 aggregation functions</code></p>
<blockquote>
<p><strong>aggregation function</strong> : convert single- and pairwise-column features into scalar values</p>
<ol>
<li>train separate models per number of columns</li>
<li>include column features with padding</li>
</ol>
</blockquote>
</li>
</ol>
<br />



<h3 id="Design-Choice-Extraction"><a href="#Design-Choice-Extraction" class="headerlink" title="Design Choice Extraction"></a>Design Choice Extraction</h3><p><em>extract an analyst’s design choices to…</em></p>
<p><strong>parse the traces</strong> because each visualization consists of traces that associate collections of data with visual elements</p>
<br />



<h4 id="Encoding-level-Desing-Choices"><a href="#Encoding-level-Desing-Choices" class="headerlink" title="Encoding-level Desing Choices"></a>Encoding-level Desing Choices</h4><ul>
<li><code>mark type</code> : scatter, etc.</li>
<li><code>column encoding</code> : which column is represented on which axis, whether or not an X or Y column is the single column represented along that axis</li>
</ul>
<br />



<p><em>by aggregating these choices…</em></p>
<p>👇 </p>
<h4 id="Visualization-level-Design-Choices"><a href="#Visualization-level-Design-Choices" class="headerlink" title="Visualization-level Design Choices"></a>Visualization-level Design Choices</h4><ol>
<li><p>describe the <strong>type shared</strong> among all traces</p>
</li>
<li><p>determine whether the visualization has a <strong>shared axis</strong></p>
</li>
</ol>
<br />



<h2 id="Methods"><a href="#Methods" class="headerlink" title="Methods"></a>Methods</h2><h3 id="Feature-Processing"><a href="#Feature-Processing" class="headerlink" title="Feature Processing"></a>Feature Processing</h3><ol>
<li><p>apply <code>one-hot encoding</code> to <em>categorical features</em></p>
</li>
<li><p>set <code>numeric values</code> <em>above 99% or below 1%</em> to respective cut-offs</p>
</li>
<li><p>impute <code>missing categorical values</code> using <em>the mode of non-missing values, and missing numeric values with the mean of non-missing values</em></p>
</li>
<li><p><strong>remove</strong> the mean of numeric fields and <strong>scale</strong> to unit variance</p>
</li>
<li><p><strong>randomly remove</strong> datasets that are <em>exact deduplicates of each other</em></p>
<blockquote>
<p>remove all but one randomly selected dataset per user</p>
<p>👉 remove bias towards more prolific users</p>
</blockquote>
</li>
</ol>
<br />



<h3 id="Prediction-Tasks"><a href="#Prediction-Tasks" class="headerlink" title="Prediction Tasks"></a>Prediction Tasks</h3><h4 id="Two-visualization-level-prediction-tasks"><a href="#Two-visualization-level-prediction-tasks" class="headerlink" title="Two visualization-level prediction tasks"></a>Two visualization-level prediction tasks</h4><p>use <em><strong>dataset-level</strong> features</em></p>
<img width="298" aligned="center" alt="Screenshot 2021-05-19 at 15 49 37" src="https://user-images.githubusercontent.com/49134038/118769566-46229a00-b8bb-11eb-9228-6ea36108c95c.png">

<p>to predict <strong>visualization-level</strong> design choices</p>
<br />



<h4 id="Three-encoding-level-prediction-tasks"><a href="#Three-encoding-level-prediction-tasks" class="headerlink" title="Three encoding-level prediction tasks"></a>Three encoding-level prediction tasks</h4><p>use <em>features about <strong>individual columns</strong></em></p>
<img width="300" aligned="center" alt="Screenshot 2021-05-19 at 15 49 50" src="https://user-images.githubusercontent.com/49134038/118769559-43c04000-b8bb-11eb-9db5-9b2623274252.png">

<p>to predict <strong>how</strong> they are visually <strong>encoded</strong></p>
<blockquote>
<p>consider each column <em>indepedently,</em></p>
<p>instead of alongside other columns in the same dataset</p>
</blockquote>
<br />



<hr>
<h5 id="Visualization-Type-amp-Mark-Type-task"><a href="#Visualization-Type-amp-Mark-Type-task" class="headerlink" title="Visualization Type &amp; Mark Type task"></a>Visualization Type &amp; Mark Type task</h5><p>2 class task : line vs. bar</p>
<p>3 class task : scatter vs. line vs. var</p>
<hr>
<h3 id="Neural-Network-and-Baseline-Models"><a href="#Neural-Network-and-Baseline-Models" class="headerlink" title="Neural Network and Baseline Models"></a>Neural Network and Baseline Models</h3><ul>
<li><p>fully-connected feedforward neural network</p>
</li>
<li><p>with 3 hidden layers, each consisting of 1000 neurons</p>
</li>
<li><p>with ReLU activation functions</p>
</li>
<li><p>split the data in 60/ 20/ 20 (train/ validation/ test sets) 5 times using 5-fold cross-validation</p>
</li>
</ul>
<br />



<h4 id="Features"><a href="#Features" class="headerlink" title="Features"></a>Features</h4><ol>
<li>D</li>
<li>D+T</li>
<li>D+T+V</li>
<li>D+T+V+N = ALL</li>
</ol>
<br />
                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/05/19/VizML-paper-review/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
          <li class="pagination-next">
            <a
                class="btn btn--default btn--small"
                href="/page/2/"
                aria-label="OLDER POSTS"
            >
              <span>OLDER POSTS</span>
              <i class="fa fa-angle-right text-base icon-ml"></i>
            </a>
          </li>
        
        <li class="pagination-number">page 1 of 6</li>
    </ul>
</div>

</section>


                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2021 JungHyun. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/profile.jpeg" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">JungHyun</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                Seoul/South Korea, London/UK
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/IMG_5960.jpeg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/jquery.js"></script>


<script src="/assets/js/jquery.fancybox.js"></script>


<script src="/assets/js/thumbs.js"></script>


<script src="/assets/js/tranquilpeak.js"></script>

<!--SCRIPTS END-->





    </body>
</html>
